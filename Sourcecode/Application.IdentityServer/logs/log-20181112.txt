2018-11-12 14:38:19.229 +07:00 [Information] User profile is available. Using '"C:\Users\quyenth\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2018-11-12 14:38:19.449 +07:00 [Information] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-12 14:38:20.146 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/api/values  
2018-11-12 14:38:20.589 +07:00 [Information] Executing action method "Application.IdentityServer.Controllers.ValuesController.Get (Application.IdentityServer)" with arguments (null) - ModelState is Valid
2018-11-12 14:38:20.596 +07:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2018-11-12 14:38:20.644 +07:00 [Information] Executed action "Application.IdentityServer.Controllers.ValuesController.Get (Application.IdentityServer)" in 60.3397ms
2018-11-12 14:38:20.646 +07:00 [Information] Request finished in 507.2406ms 200 application/json; charset=utf-8
2018-11-12 14:38:20.723 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/favicon.ico  
2018-11-12 14:38:20.728 +07:00 [Information] Request finished in 4.362ms 404 
2018-11-12 14:39:13.573 +07:00 [Information] User profile is available. Using '"C:\Users\quyenth\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2018-11-12 14:39:14.059 +07:00 [Information] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-12 14:39:14.822 +07:00 [Information] Request starting HTTP/1.1 DEBUG http://localhost:57906/  0
2018-11-12 14:39:14.822 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/api/values  
2018-11-12 14:39:15.012 +07:00 [Information] Request finished in 196.716ms 200 
2018-11-12 14:39:15.645 +07:00 [Information] Executing action method "Application.IdentityServer.Controllers.ValuesController.Get (Application.IdentityServer)" with arguments (null) - ModelState is Valid
2018-11-12 14:39:15.675 +07:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2018-11-12 14:39:15.739 +07:00 [Information] Executed action "Application.IdentityServer.Controllers.ValuesController.Get (Application.IdentityServer)" in 104.157ms
2018-11-12 14:39:15.780 +07:00 [Information] Request finished in 966.886ms 200 application/json; charset=utf-8
2018-11-12 14:40:08.492 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/api/account/signin?username=quyenth@gmail.com&password=Admin@123  
2018-11-12 14:40:08.587 +07:00 [Information] Request finished in 95.2734ms 404 
2018-11-12 14:40:16.605 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/api/account?username=quyenth@gmail.com&password=Admin@123  
2018-11-12 14:40:17.521 +07:00 [Information] Executed action "Application.IdentityServer.Controllers.AccountController.Signin (Application.IdentityServer)" in 698.1948ms
2018-11-12 14:40:17.773 +07:00 [Error] An unhandled exception has occurred while executing the request
System.InvalidOperationException: Unable to resolve service for type 'Microsoft.Extensions.Logging.ILogger' while attempting to activate 'Application.IdentityServer.Controllers.AccountController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.GetService(IServiceProvider sp, Type type, Type requiredBy, Boolean isDefaultParameterRequired)
   at lambda_method(Closure , IServiceProvider , Object[] )
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerActivatorProvider.<>c__DisplayClass4_0.<CreateActivator>b__0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass5_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeInnerFilterAsync>d__14.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeNextResourceFilter>d__22.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeFilterPipelineAsync>d__17.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeAsync>d__15.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Builder.RouterMiddleware.<Invoke>d__4.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at IdentityServer4.Hosting.IdentityServerMiddleware.<Invoke>d__3.MoveNext() in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 72
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.<Invoke>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at IdentityServer4.Hosting.BaseUrlMiddleware.<Invoke>d__3.MoveNext() in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 36
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.<Invoke>d__4.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.<Invoke>d__7.MoveNext()
2018-11-12 14:40:18.384 +07:00 [Information] Request finished in 1779.5075ms 500 text/html; charset=utf-8
2018-11-12 14:41:06.235 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/api/account?username=quyenth@gmail.com&password=Admin@123  
2018-11-12 14:41:06.392 +07:00 [Information] Executed action "Application.IdentityServer.Controllers.AccountController.Signin (Application.IdentityServer)" in 129.3418ms
2018-11-12 14:41:06.690 +07:00 [Error] An unhandled exception has occurred while executing the request
System.InvalidOperationException: Unable to resolve service for type 'Microsoft.Extensions.Logging.ILogger' while attempting to activate 'Application.IdentityServer.Controllers.AccountController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.GetService(IServiceProvider sp, Type type, Type requiredBy, Boolean isDefaultParameterRequired)
   at lambda_method(Closure , IServiceProvider , Object[] )
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerActivatorProvider.<>c__DisplayClass4_0.<CreateActivator>b__0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass5_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeInnerFilterAsync>d__14.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeNextResourceFilter>d__22.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeFilterPipelineAsync>d__17.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeAsync>d__15.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Builder.RouterMiddleware.<Invoke>d__4.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at IdentityServer4.Hosting.IdentityServerMiddleware.<Invoke>d__3.MoveNext() in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 72
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.<Invoke>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at IdentityServer4.Hosting.BaseUrlMiddleware.<Invoke>d__3.MoveNext() in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 36
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.<Invoke>d__4.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.<Invoke>d__7.MoveNext()
2018-11-12 14:41:06.923 +07:00 [Information] Request finished in 687.0326ms 500 text/html; charset=utf-8
2018-11-12 14:42:03.454 +07:00 [Information] User profile is available. Using '"C:\Users\quyenth\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2018-11-12 14:42:03.563 +07:00 [Information] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-12 14:42:03.959 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/api/account?username=quyenth@gmail.com&password=Admin@123  
2018-11-12 14:42:04.303 +07:00 [Information] Executing action method "Application.IdentityServer.Controllers.AccountController.Signin (Application.IdentityServer)" with arguments (["quyenth@gmail.com", "Admin@123", "ApiApplication", "secret", "api"]) - ModelState is Valid
2018-11-12 14:42:06.502 +07:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2018-11-12 14:42:06.527 +07:00 [Information] Executed action "Application.IdentityServer.Controllers.AccountController.Signin (Application.IdentityServer)" in 2398.045ms
2018-11-12 14:42:06.534 +07:00 [Information] Request finished in 2581.529ms 400 application/json; charset=utf-8
2018-11-12 14:43:52.045 +07:00 [Information] User profile is available. Using '"C:\Users\quyenth\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2018-11-12 14:43:52.388 +07:00 [Information] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-12 14:43:52.906 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/api/values  
2018-11-12 14:43:52.906 +07:00 [Information] Request starting HTTP/1.1 DEBUG http://localhost:57906/  0
2018-11-12 14:43:53.022 +07:00 [Information] Request finished in 127.4208ms 200 
2018-11-12 14:43:53.424 +07:00 [Information] Executing action method "Application.IdentityServer.Controllers.ValuesController.Get (Application.IdentityServer)" with arguments (null) - ModelState is Valid
2018-11-12 14:43:53.449 +07:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2018-11-12 14:43:53.511 +07:00 [Information] Executed action "Application.IdentityServer.Controllers.ValuesController.Get (Application.IdentityServer)" in 97.1ms
2018-11-12 14:43:53.558 +07:00 [Information] Request finished in 665.1573ms 200 application/json; charset=utf-8
2018-11-12 14:44:05.689 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/api/account/signin?username=quyenth@gmail.com&password=Admin@123  
2018-11-12 14:44:05.996 +07:00 [Information] Executing action method "Application.IdentityServer.Controllers.AccountController.Signin (Application.IdentityServer)" with arguments (["quyenth@gmail.com", "Admin@123", "ApiApplication", "secret", "api"]) - ModelState is Valid
2018-11-12 14:50:45.200 +07:00 [Information] User profile is available. Using '"C:\Users\quyenth\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2018-11-12 14:50:45.577 +07:00 [Information] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-12 14:50:46.297 +07:00 [Information] Request starting HTTP/1.1 DEBUG http://localhost:57906/  0
2018-11-12 14:50:46.297 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/api/values  
2018-11-12 14:50:46.434 +07:00 [Information] Request finished in 147.0436ms 200 
2018-11-12 14:50:46.976 +07:00 [Information] Executing action method "Application.IdentityServer.Controllers.ValuesController.Get (Application.IdentityServer)" with arguments (null) - ModelState is Valid
2018-11-12 14:50:47.016 +07:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2018-11-12 14:50:47.128 +07:00 [Information] Executed action "Application.IdentityServer.Controllers.ValuesController.Get (Application.IdentityServer)" in 160.7223ms
2018-11-12 14:50:47.143 +07:00 [Information] Request finished in 857.7608ms 200 application/json; charset=utf-8
2018-11-12 14:50:50.562 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/api/account/signin?username=quyenth@gmail.com&password=Admin@123  
2018-11-12 14:50:50.915 +07:00 [Information] Executing action method "Application.IdentityServer.Controllers.AccountController.Signin (Application.IdentityServer)" with arguments (["quyenth@gmail.com", "Admin@123", "ApiApplication", "secret", "api"]) - ModelState is Valid
2018-11-12 14:50:59.772 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/.well-known/openid-configuration  
2018-11-12 14:50:59.789 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryEndpoint" for "/.well-known/openid-configuration"
2018-11-12 14:50:59.940 +07:00 [Information] Request finished in 167.49ms 200 application/json; charset=UTF-8
2018-11-12 14:51:00.030 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/.well-known/openid-configuration/jwks  
2018-11-12 14:51:00.052 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryKeyEndpoint" for "/.well-known/openid-configuration/jwks"
2018-11-12 14:51:00.101 +07:00 [Information] Request finished in 71.6065ms 200 application/json; charset=UTF-8
2018-11-12 14:51:04.223 +07:00 [Information] Request starting HTTP/1.1 POST http://localhost:57906/connect/token application/x-www-form-urlencoded 79
2018-11-12 14:51:04.246 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.TokenEndpoint" for "/connect/token"
2018-11-12 14:51:04.372 +07:00 [Error] Requested scope not allowed: "api"
2018-11-12 14:51:04.387 +07:00 [Error] "{
  \"ClientId\": \"ApiApplication\",
  \"GrantType\": \"password\",
  \"Raw\": {
    \"grant_type\": \"password\",
    \"username\": \"quyenth@gmail.com\",
    \"password\": \"***REDACTED***\",
    \"scope\": \"api\"
  }
}"
2018-11-12 14:51:05.480 +07:00 [Information] Request finished in 1257.4281ms 400 application/json; charset=UTF-8
2018-11-12 14:51:16.395 +07:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2018-11-12 14:51:16.398 +07:00 [Information] Executed action "Application.IdentityServer.Controllers.AccountController.Signin (Application.IdentityServer)" in 25766.0745ms
2018-11-12 14:51:16.421 +07:00 [Information] Request finished in 25859.8372ms 400 application/json; charset=utf-8
2018-11-12 14:51:24.435 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/api/account/signin?username=quyenth@gmail.com&password=Admin@123&scope=api2  
2018-11-12 14:51:24.463 +07:00 [Information] Executing action method "Application.IdentityServer.Controllers.AccountController.Signin (Application.IdentityServer)" with arguments (["quyenth@gmail.com", "Admin@123", "ApiApplication", "secret", "api2"]) - ModelState is Valid
2018-11-12 14:51:33.128 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/.well-known/openid-configuration  
2018-11-12 14:51:33.147 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryEndpoint" for "/.well-known/openid-configuration"
2018-11-12 14:51:33.166 +07:00 [Information] Request finished in 38.2622ms 200 application/json; charset=UTF-8
2018-11-12 14:51:33.198 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/.well-known/openid-configuration/jwks  
2018-11-12 14:51:33.222 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryKeyEndpoint" for "/.well-known/openid-configuration/jwks"
2018-11-12 14:51:33.266 +07:00 [Information] Request finished in 68.293ms 200 application/json; charset=UTF-8
2018-11-12 14:51:34.594 +07:00 [Information] Request starting HTTP/1.1 POST http://localhost:57906/connect/token application/x-www-form-urlencoded 80
2018-11-12 14:51:34.623 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.TokenEndpoint" for "/connect/token"
2018-11-12 14:51:35.793 +07:00 [Information] Entity Framework Core "2.1.4-rtm-31024" initialized '"ApplicationIdentityContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=AspNetCore "
2018-11-12 14:51:42.062 +07:00 [Information] Executed DbCommand ("165"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [AspNetUsers] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0"
2018-11-12 14:51:42.305 +07:00 [Information] Credentials validated for username: "quyenth@gmail.com"
2018-11-12 14:51:42.323 +07:00 [Information] Token request validation success
"{
  \"ClientId\": \"ApiApplication\",
  \"GrantType\": \"password\",
  \"Scopes\": \"api2\",
  \"UserName\": \"quyenth@gmail.com\",
  \"Raw\": {
    \"grant_type\": \"password\",
    \"username\": \"quyenth@gmail.com\",
    \"password\": \"***REDACTED***\",
    \"scope\": \"api2\"
  }
}"
2018-11-12 14:51:42.501 +07:00 [Information] Executed DbCommand ("7"ms) [Parameters=["@__user_Id_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0"
2018-11-12 14:51:42.711 +07:00 [Information] Executed DbCommand ("50"ms) [Parameters=["@__userId_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0"
2018-11-12 14:51:42.954 +07:00 [Information] Request finished in 8359.657ms 200 application/json; charset=UTF-8
2018-11-12 14:51:56.921 +07:00 [Information] Entity Framework Core "2.1.4-rtm-31024" initialized '"ApplicationIdentityContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=AspNetCore "
2018-11-12 14:51:56.952 +07:00 [Information] Executed DbCommand ("4"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [AspNetUsers] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0"
2018-11-12 14:52:03.006 +07:00 [Information] Executed DbCommand ("3"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [AspNetUsers] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0"
2018-11-12 14:52:26.128 +07:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2018-11-12 14:52:26.143 +07:00 [Information] Executed action "Application.IdentityServer.Controllers.AccountController.Signin (Application.IdentityServer)" in 61682.757ms
2018-11-12 14:52:26.205 +07:00 [Information] Request finished in 61772.802ms 200 application/json; charset=utf-8
2018-11-12 14:55:12.718 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/api/account/signin?username=quyenth@gmail.com&password=Admin@123&scope=api2  
2018-11-12 14:55:12.738 +07:00 [Information] Executing action method "Application.IdentityServer.Controllers.AccountController.Signin (Application.IdentityServer)" with arguments (["quyenth@gmail.com", "Admin@123", "ApiApplication", "secret", "api2"]) - ModelState is Valid
2018-11-12 14:55:14.657 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/.well-known/openid-configuration  
2018-11-12 14:55:14.670 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryEndpoint" for "/.well-known/openid-configuration"
2018-11-12 14:55:14.682 +07:00 [Information] Request finished in 24.6972ms 200 application/json; charset=UTF-8
2018-11-12 14:55:14.710 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/.well-known/openid-configuration/jwks  
2018-11-12 14:55:14.726 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryKeyEndpoint" for "/.well-known/openid-configuration/jwks"
2018-11-12 14:55:14.738 +07:00 [Information] Request finished in 27.5023ms 200 application/json; charset=UTF-8
2018-11-12 14:55:14.782 +07:00 [Information] Request starting HTTP/1.1 POST http://localhost:57906/connect/token application/x-www-form-urlencoded 80
2018-11-12 14:55:14.797 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.TokenEndpoint" for "/connect/token"
2018-11-12 14:55:14.828 +07:00 [Information] Entity Framework Core "2.1.4-rtm-31024" initialized '"ApplicationIdentityContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=AspNetCore "
2018-11-12 14:55:14.839 +07:00 [Information] Executed DbCommand ("4"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [AspNetUsers] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0"
2018-11-12 14:55:14.888 +07:00 [Information] Credentials validated for username: "quyenth@gmail.com"
2018-11-12 14:55:14.903 +07:00 [Information] Token request validation success
"{
  \"ClientId\": \"ApiApplication\",
  \"GrantType\": \"password\",
  \"Scopes\": \"api2\",
  \"UserName\": \"quyenth@gmail.com\",
  \"Raw\": {
    \"grant_type\": \"password\",
    \"username\": \"quyenth@gmail.com\",
    \"password\": \"***REDACTED***\",
    \"scope\": \"api2\"
  }
}"
2018-11-12 14:55:20.607 +07:00 [Information] Executed DbCommand ("2"ms) [Parameters=["@__user_Id_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0"
2018-11-12 14:55:20.650 +07:00 [Information] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0"
2018-11-12 14:59:40.779 +07:00 [Information] User profile is available. Using '"C:\Users\quyenth\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2018-11-12 14:59:41.131 +07:00 [Information] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-12 14:59:41.808 +07:00 [Information] Request starting HTTP/1.1 DEBUG http://localhost:57906/  0
2018-11-12 14:59:41.810 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/api/values  
2018-11-12 14:59:41.939 +07:00 [Information] Request finished in 144.9313ms 200 
2018-11-12 14:59:42.376 +07:00 [Information] Executing action method "Application.IdentityServer.Controllers.ValuesController.Get (Application.IdentityServer)" with arguments (null) - ModelState is Valid
2018-11-12 14:59:42.408 +07:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2018-11-12 14:59:42.476 +07:00 [Information] Executed action "Application.IdentityServer.Controllers.ValuesController.Get (Application.IdentityServer)" in 112.923ms
2018-11-12 14:59:42.495 +07:00 [Information] Request finished in 700.9794ms 200 application/json; charset=utf-8
2018-11-12 15:00:05.384 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/api/account/signin?username=quyenth@gmail.com&password=Admin@123&scope=api2  
2018-11-12 15:00:05.716 +07:00 [Information] Executing action method "Application.IdentityServer.Controllers.AccountController.Signin (Application.IdentityServer)" with arguments (["quyenth@gmail.com", "Admin@123", "ApiApplication", "secret", "api2"]) - ModelState is Valid
2018-11-12 15:00:07.534 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/.well-known/openid-configuration  
2018-11-12 15:00:07.551 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryEndpoint" for "/.well-known/openid-configuration"
2018-11-12 15:00:07.617 +07:00 [Information] Request finished in 82.9103ms 200 application/json; charset=UTF-8
2018-11-12 15:00:07.695 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/.well-known/openid-configuration/jwks  
2018-11-12 15:00:07.731 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryKeyEndpoint" for "/.well-known/openid-configuration/jwks"
2018-11-12 15:00:07.803 +07:00 [Information] Request finished in 107.5315ms 200 application/json; charset=UTF-8
2018-11-12 15:00:09.727 +07:00 [Information] Request starting HTTP/1.1 POST http://localhost:57906/connect/token application/x-www-form-urlencoded 80
2018-11-12 15:00:09.747 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.TokenEndpoint" for "/connect/token"
2018-11-12 15:00:10.674 +07:00 [Information] Entity Framework Core "2.1.4-rtm-31024" initialized '"ApplicationIdentityContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=AspNetCore "
2018-11-12 15:00:11.952 +07:00 [Information] Executed DbCommand ("160"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [AspNetUsers] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0"
2018-11-12 15:00:12.199 +07:00 [Information] Credentials validated for username: "quyenth@gmail.com"
2018-11-12 15:00:12.246 +07:00 [Information] Token request validation success
"{
  \"ClientId\": \"ApiApplication\",
  \"GrantType\": \"password\",
  \"Scopes\": \"api2\",
  \"UserName\": \"quyenth@gmail.com\",
  \"Raw\": {
    \"grant_type\": \"password\",
    \"username\": \"quyenth@gmail.com\",
    \"password\": \"***REDACTED***\",
    \"scope\": \"api2\"
  }
}"
2018-11-12 15:00:14.458 +07:00 [Information] Executed DbCommand ("38"ms) [Parameters=["@__user_Id_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0"
2018-11-12 15:00:14.565 +07:00 [Information] Executed DbCommand ("28"ms) [Parameters=["@__userId_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0"
2018-11-12 15:00:17.812 +07:00 [Information] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0"
2018-11-12 15:00:21.509 +07:00 [Information] Executed DbCommand ("5"ms) [Parameters=["@__user_Id_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0"
2018-11-12 15:00:36.664 +07:00 [Information] Request finished in 26931.8035ms 200 application/json; charset=UTF-8
2018-11-12 15:00:37.812 +07:00 [Information] Entity Framework Core "2.1.4-rtm-31024" initialized '"ApplicationIdentityContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=AspNetCore "
2018-11-12 15:00:37.845 +07:00 [Information] Executed DbCommand ("18"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [AspNetUsers] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0"
2018-11-12 15:00:39.474 +07:00 [Information] Executed DbCommand ("4"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [AspNetUsers] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0"
2018-11-12 15:01:04.481 +07:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2018-11-12 15:01:04.494 +07:00 [Information] Executed action "Application.IdentityServer.Controllers.AccountController.Signin (Application.IdentityServer)" in 59033.3884ms
2018-11-12 15:01:04.523 +07:00 [Information] Request finished in 59129.5225ms 200 application/json; charset=utf-8
2018-11-12 15:13:55.940 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/.well-known/openid-configuration  
2018-11-12 15:13:55.983 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryEndpoint" for "/.well-known/openid-configuration"
2018-11-12 15:13:56.045 +07:00 [Information] Request finished in 104.9353ms 200 application/json; charset=UTF-8
2018-11-12 15:14:20.319 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/connect/userinfo  
2018-11-12 15:14:20.359 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.UserInfoEndpoint" for "/connect/userinfo"
2018-11-12 15:14:20.384 +07:00 [Error] No access token found.
2018-11-12 15:14:20.392 +07:00 [Information] Request finished in 72.3149ms 401 
2018-11-12 15:16:43.222 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/connect/userinfo  
2018-11-12 15:16:43.333 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.UserInfoEndpoint" for "/connect/userinfo"
2018-11-12 15:16:43.360 +07:00 [Error] No access token found.
2018-11-12 15:16:43.389 +07:00 [Information] Request finished in 166.8465ms 401 
2018-11-12 15:16:53.417 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/connect/userinfo  
2018-11-12 15:16:53.454 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.UserInfoEndpoint" for "/connect/userinfo"
2018-11-12 15:16:53.461 +07:00 [Error] No access token found.
2018-11-12 15:16:53.468 +07:00 [Information] Request finished in 50.2412ms 401 
2018-11-12 15:16:55.864 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/connect/userinfo  
2018-11-12 15:16:55.890 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.UserInfoEndpoint" for "/connect/userinfo"
2018-11-12 15:16:55.895 +07:00 [Error] No access token found.
2018-11-12 15:16:55.908 +07:00 [Information] Request finished in 43.559ms 401 
2018-11-12 15:17:09.982 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/connect/userinfo  
2018-11-12 15:17:10.000 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.UserInfoEndpoint" for "/connect/userinfo"
2018-11-12 15:17:10.141 +07:00 [Information] Entity Framework Core "2.1.4-rtm-31024" initialized '"ApplicationIdentityContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=AspNetCore "
2018-11-12 15:17:13.452 +07:00 [Information] Executed DbCommand ("17"ms) [Parameters=["@__get_Item_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[FullName], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[SecurityStamp], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0"
2018-11-12 15:17:13.493 +07:00 [Error] Checking for expected scope openid failed
"{
  \"ValidateLifetime\": true,
  \"AccessTokenType\": \"Jwt\",
  \"ExpectedScope\": \"openid\",
  \"JwtId\": \"08abf095239002886b0405cc39477f46\",
  \"Claims\": {
    \"nbf\": 1542009636,
    \"exp\": 1542013236,
    \"iss\": \"http://localhost:57906\",
    \"aud\": [
      \"http://localhost:57906/resources\",
      \"api2\"
    ],
    \"client_id\": \"ApiApplication\",
    \"sub\": \"7add0627-9b36-4ab4-83f8-6c5fc986b885\",
    \"auth_time\": 1542009612,
    \"idp\": \"local\",
    \"username\": \"quyenth@gmail.com\",
    \"email\": \"quyenth@gmail.com\",
    \"fullname\": \"Thais hong quyen\",
    \"jti\": \"08abf095239002886b0405cc39477f46\",
    \"scope\": \"api2\",
    \"amr\": \"pwd\"
  }
}"
2018-11-12 15:17:13.515 +07:00 [Information] Request finished in 3531.8757ms 403 
2018-11-12 15:18:01.975 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/api/account/signin?username=quyenth@gmail.com&password=Admin@123&scope=api2  
2018-11-12 15:18:02.011 +07:00 [Information] Executing action method "Application.IdentityServer.Controllers.AccountController.Signin (Application.IdentityServer)" with arguments (["quyenth@gmail.com", "Admin@123", "ApiApplication", "secret", "api2"]) - ModelState is Valid
2018-11-12 15:18:03.653 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/.well-known/openid-configuration  
2018-11-12 15:18:03.666 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryEndpoint" for "/.well-known/openid-configuration"
2018-11-12 15:18:03.684 +07:00 [Information] Request finished in 31.0543ms 200 application/json; charset=UTF-8
2018-11-12 15:18:03.698 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/.well-known/openid-configuration/jwks  
2018-11-12 15:18:03.717 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryKeyEndpoint" for "/.well-known/openid-configuration/jwks"
2018-11-12 15:18:03.751 +07:00 [Information] Request finished in 53.2079ms 200 application/json; charset=UTF-8
2018-11-12 15:18:03.767 +07:00 [Information] Request starting HTTP/1.1 POST http://localhost:57906/connect/token application/x-www-form-urlencoded 80
2018-11-12 15:18:03.799 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.TokenEndpoint" for "/connect/token"
2018-11-12 15:18:03.952 +07:00 [Information] Entity Framework Core "2.1.4-rtm-31024" initialized '"ApplicationIdentityContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=AspNetCore "
2018-11-12 15:18:04.192 +07:00 [Information] Executed DbCommand ("34"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [AspNetUsers] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0"
2018-11-12 15:18:04.218 +07:00 [Information] Credentials validated for username: "quyenth@gmail.com"
2018-11-12 15:18:04.223 +07:00 [Information] Token request validation success
"{
  \"ClientId\": \"ApiApplication\",
  \"GrantType\": \"password\",
  \"Scopes\": \"api2\",
  \"UserName\": \"quyenth@gmail.com\",
  \"Raw\": {
    \"grant_type\": \"password\",
    \"username\": \"quyenth@gmail.com\",
    \"password\": \"***REDACTED***\",
    \"scope\": \"api2\"
  }
}"
2018-11-12 15:18:05.433 +07:00 [Information] Executed DbCommand ("5"ms) [Parameters=["@__user_Id_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0"
2018-11-12 15:18:05.451 +07:00 [Information] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0"
2018-11-12 15:18:05.465 +07:00 [Information] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0"
2018-11-12 15:18:05.478 +07:00 [Information] Executed DbCommand ("2"ms) [Parameters=["@__user_Id_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0"
2018-11-12 15:18:05.507 +07:00 [Information] Request finished in 1740.1565ms 200 application/json; charset=UTF-8
2018-11-12 15:18:07.267 +07:00 [Information] Entity Framework Core "2.1.4-rtm-31024" initialized '"ApplicationIdentityContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=AspNetCore "
2018-11-12 15:18:07.304 +07:00 [Information] Executed DbCommand ("3"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [AspNetUsers] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0"
2018-11-12 15:18:07.322 +07:00 [Information] Executed DbCommand ("2"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [AspNetUsers] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0"
2018-11-12 15:18:07.353 +07:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2018-11-12 15:18:07.355 +07:00 [Information] Executed action "Application.IdentityServer.Controllers.AccountController.Signin (Application.IdentityServer)" in 5344.4601ms
2018-11-12 15:18:07.375 +07:00 [Information] Request finished in 5398.5145ms 200 application/json; charset=utf-8
2018-11-12 15:18:33.460 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/connect/userinfo  
2018-11-12 15:18:33.476 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.UserInfoEndpoint" for "/connect/userinfo"
2018-11-12 15:18:33.507 +07:00 [Information] Entity Framework Core "2.1.4-rtm-31024" initialized '"ApplicationIdentityContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=AspNetCore "
2018-11-12 15:18:33.521 +07:00 [Information] Executed DbCommand ("5"ms) [Parameters=["@__get_Item_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[FullName], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[SecurityStamp], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0"
2018-11-12 15:18:33.532 +07:00 [Error] Checking for expected scope openid failed
"{
  \"ValidateLifetime\": true,
  \"AccessTokenType\": \"Jwt\",
  \"ExpectedScope\": \"openid\",
  \"JwtId\": \"71eb6f0ddc1a96d80674c18c0b236757\",
  \"Claims\": {
    \"nbf\": 1542010685,
    \"exp\": 1542014285,
    \"iss\": \"http://localhost:57906\",
    \"aud\": [
      \"http://localhost:57906/resources\",
      \"api2\"
    ],
    \"client_id\": \"ApiApplication\",
    \"sub\": \"7add0627-9b36-4ab4-83f8-6c5fc986b885\",
    \"auth_time\": 1542010684,
    \"idp\": \"local\",
    \"username\": \"quyenth@gmail.com\",
    \"email\": \"quyenth@gmail.com\",
    \"fullname\": \"Thais hong quyen\",
    \"jti\": \"71eb6f0ddc1a96d80674c18c0b236757\",
    \"scope\": \"api2\",
    \"amr\": \"pwd\"
  }
}"
2018-11-12 15:18:33.541 +07:00 [Information] Request finished in 80.8867ms 403 
2018-11-12 15:20:13.373 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/connect/userinfo  
2018-11-12 15:20:13.452 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.UserInfoEndpoint" for "/connect/userinfo"
2018-11-12 15:20:13.474 +07:00 [Information] Entity Framework Core "2.1.4-rtm-31024" initialized '"ApplicationIdentityContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=AspNetCore "
2018-11-12 15:20:13.485 +07:00 [Information] Executed DbCommand ("3"ms) [Parameters=["@__get_Item_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[FullName], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[SecurityStamp], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0"
2018-11-12 15:20:13.497 +07:00 [Error] Checking for expected scope openid failed
"{
  \"ValidateLifetime\": true,
  \"AccessTokenType\": \"Jwt\",
  \"ExpectedScope\": \"openid\",
  \"JwtId\": \"71eb6f0ddc1a96d80674c18c0b236757\",
  \"Claims\": {
    \"nbf\": 1542010685,
    \"exp\": 1542014285,
    \"iss\": \"http://localhost:57906\",
    \"aud\": [
      \"http://localhost:57906/resources\",
      \"api2\"
    ],
    \"client_id\": \"ApiApplication\",
    \"sub\": \"7add0627-9b36-4ab4-83f8-6c5fc986b885\",
    \"auth_time\": 1542010684,
    \"idp\": \"local\",
    \"username\": \"quyenth@gmail.com\",
    \"email\": \"quyenth@gmail.com\",
    \"fullname\": \"Thais hong quyen\",
    \"jti\": \"71eb6f0ddc1a96d80674c18c0b236757\",
    \"scope\": \"api2\",
    \"amr\": \"pwd\"
  }
}"
2018-11-12 15:20:13.505 +07:00 [Information] Request finished in 131.6614ms 403 
2018-11-12 15:21:17.772 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/.well-known/openid-configuration  
2018-11-12 15:21:17.871 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryEndpoint" for "/.well-known/openid-configuration"
2018-11-12 15:21:17.888 +07:00 [Information] Request finished in 116.8237ms 200 application/json; charset=UTF-8
2018-11-12 15:21:58.581 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/connect/userinfo  
2018-11-12 15:21:58.644 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.UserInfoEndpoint" for "/connect/userinfo"
2018-11-12 15:21:58.652 +07:00 [Error] No access token found.
2018-11-12 15:21:58.679 +07:00 [Information] Request finished in 98.5919ms 401 
2018-11-12 15:22:55.639 +07:00 [Information] Request starting HTTP/1.1 POST http://localhost:57906/connect/userinfo text/plain 31
2018-11-12 15:22:55.658 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.UserInfoEndpoint" for "/connect/userinfo"
2018-11-12 15:22:55.675 +07:00 [Information] Entity Framework Core "2.1.4-rtm-31024" initialized '"ApplicationIdentityContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=AspNetCore "
2018-11-12 15:22:55.685 +07:00 [Information] Executed DbCommand ("3"ms) [Parameters=["@__get_Item_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[FullName], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[SecurityStamp], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0"
2018-11-12 15:22:55.693 +07:00 [Error] Checking for expected scope openid failed
"{
  \"ValidateLifetime\": true,
  \"AccessTokenType\": \"Jwt\",
  \"ExpectedScope\": \"openid\",
  \"JwtId\": \"71eb6f0ddc1a96d80674c18c0b236757\",
  \"Claims\": {
    \"nbf\": 1542010685,
    \"exp\": 1542014285,
    \"iss\": \"http://localhost:57906\",
    \"aud\": [
      \"http://localhost:57906/resources\",
      \"api2\"
    ],
    \"client_id\": \"ApiApplication\",
    \"sub\": \"7add0627-9b36-4ab4-83f8-6c5fc986b885\",
    \"auth_time\": 1542010684,
    \"idp\": \"local\",
    \"username\": \"quyenth@gmail.com\",
    \"email\": \"quyenth@gmail.com\",
    \"fullname\": \"Thais hong quyen\",
    \"jti\": \"71eb6f0ddc1a96d80674c18c0b236757\",
    \"scope\": \"api2\",
    \"amr\": \"pwd\"
  }
}"
2018-11-12 15:22:55.703 +07:00 [Information] Request finished in 64.9731ms 403 
2018-11-12 15:23:13.657 +07:00 [Information] Request starting HTTP/1.1 POST http://localhost:57906/connect/userinfo text/plain 31
2018-11-12 15:23:13.679 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.UserInfoEndpoint" for "/connect/userinfo"
2018-11-12 15:23:13.805 +07:00 [Error] JWT token validation error: "IDX12729: Unable to decode the header '[PII is hidden]' as Base64Url encoded string. jwtEncodedString: '[PII is hidden]'."
System.ArgumentException: IDX12729: Unable to decode the header '[PII is hidden]' as Base64Url encoded string. jwtEncodedString: '[PII is hidden]'. ---> Newtonsoft.Json.JsonReaderException: Bad JSON escape sequence: \. Path 'alg', line 2, position 13.
   at Newtonsoft.Json.JsonTextReader.ReadStringIntoBuffer(Char quote)
   at Newtonsoft.Json.JsonTextReader.ParseProperty()
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.PopulateDictionary(IDictionary dictionary, JsonReader reader, JsonDictionaryContract contract, JsonProperty containerProperty, String id)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.CreateObject(JsonReader reader, Type objectType, JsonContract contract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerMember, Object existingValue)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.Deserialize(JsonReader reader, Type objectType, Boolean checkAdditionalContent)
   at Newtonsoft.Json.JsonSerializer.DeserializeInternal(JsonReader reader, Type objectType)
   at Newtonsoft.Json.JsonConvert.DeserializeObject(String value, Type type, JsonSerializerSettings settings)
   at System.IdentityModel.Tokens.Jwt.JsonExtensions.DeserializeJwtHeader(String jsonString) in C:\agent2\_work\56\s\src\System.IdentityModel.Tokens.Jwt\JsonExtensions.cs:line 128
   at System.IdentityModel.Tokens.Jwt.JwtSecurityToken.Decode(String[] tokenParts, String rawData) in C:\agent2\_work\56\s\src\System.IdentityModel.Tokens.Jwt\JwtSecurityToken.cs:line 492
   --- End of inner exception stack trace ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityToken.Decode(String[] tokenParts, String rawData) in C:\agent2\_work\56\s\src\System.IdentityModel.Tokens.Jwt\JwtSecurityToken.cs:line 489
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ReadJwtToken(String token) in C:\agent2\_work\56\s\src\System.IdentityModel.Tokens.Jwt\JwtSecurityTokenHandler.cs:line 634
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateSignature(String token, TokenValidationParameters validationParameters) in C:\agent2\_work\56\s\src\System.IdentityModel.Tokens.Jwt\JwtSecurityTokenHandler.cs:line 887
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken) in C:\agent2\_work\56\s\src\System.IdentityModel.Tokens.Jwt\JwtSecurityTokenHandler.cs:line 718
   at IdentityServer4.Validation.TokenValidator.<ValidateJwtAsync>d__14.MoveNext() in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Validation\TokenValidator.cs:line 287
2018-11-12 15:23:14.173 +07:00 [Information] Request finished in 516.2146ms 401 
2018-11-12 15:23:18.469 +07:00 [Information] Request starting HTTP/1.1 POST http://localhost:57906/connect/userinfo text/plain 31
2018-11-12 15:23:18.495 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.UserInfoEndpoint" for "/connect/userinfo"
2018-11-12 15:23:18.518 +07:00 [Information] Entity Framework Core "2.1.4-rtm-31024" initialized '"ApplicationIdentityContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=AspNetCore "
2018-11-12 15:23:18.529 +07:00 [Information] Executed DbCommand ("4"ms) [Parameters=["@__get_Item_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[FullName], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[SecurityStamp], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0"
2018-11-12 15:23:18.541 +07:00 [Error] Checking for expected scope openid failed
"{
  \"ValidateLifetime\": true,
  \"AccessTokenType\": \"Jwt\",
  \"ExpectedScope\": \"openid\",
  \"JwtId\": \"71eb6f0ddc1a96d80674c18c0b236757\",
  \"Claims\": {
    \"nbf\": 1542010685,
    \"exp\": 1542014285,
    \"iss\": \"http://localhost:57906\",
    \"aud\": [
      \"http://localhost:57906/resources\",
      \"api2\"
    ],
    \"client_id\": \"ApiApplication\",
    \"sub\": \"7add0627-9b36-4ab4-83f8-6c5fc986b885\",
    \"auth_time\": 1542010684,
    \"idp\": \"local\",
    \"username\": \"quyenth@gmail.com\",
    \"email\": \"quyenth@gmail.com\",
    \"fullname\": \"Thais hong quyen\",
    \"jti\": \"71eb6f0ddc1a96d80674c18c0b236757\",
    \"scope\": \"api2\",
    \"amr\": \"pwd\"
  }
}"
2018-11-12 15:23:18.557 +07:00 [Information] Request finished in 88.0951ms 403 
2018-11-12 15:24:49.714 +07:00 [Information] Request starting HTTP/1.1 POST http://localhost:57906/connect/userinfo text/plain 31
2018-11-12 15:24:49.731 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.UserInfoEndpoint" for "/connect/userinfo"
2018-11-12 15:24:49.750 +07:00 [Information] Entity Framework Core "2.1.4-rtm-31024" initialized '"ApplicationIdentityContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=AspNetCore "
2018-11-12 15:24:49.760 +07:00 [Information] Executed DbCommand ("3"ms) [Parameters=["@__get_Item_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[FullName], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[SecurityStamp], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0"
2018-11-12 15:24:49.770 +07:00 [Error] Checking for expected scope openid failed
"{
  \"ValidateLifetime\": true,
  \"AccessTokenType\": \"Jwt\",
  \"ExpectedScope\": \"openid\",
  \"JwtId\": \"71eb6f0ddc1a96d80674c18c0b236757\",
  \"Claims\": {
    \"nbf\": 1542010685,
    \"exp\": 1542014285,
    \"iss\": \"http://localhost:57906\",
    \"aud\": [
      \"http://localhost:57906/resources\",
      \"api2\"
    ],
    \"client_id\": \"ApiApplication\",
    \"sub\": \"7add0627-9b36-4ab4-83f8-6c5fc986b885\",
    \"auth_time\": 1542010684,
    \"idp\": \"local\",
    \"username\": \"quyenth@gmail.com\",
    \"email\": \"quyenth@gmail.com\",
    \"fullname\": \"Thais hong quyen\",
    \"jti\": \"71eb6f0ddc1a96d80674c18c0b236757\",
    \"scope\": \"api2\",
    \"amr\": \"pwd\"
  }
}"
2018-11-12 15:24:49.821 +07:00 [Information] Request finished in 106.9986ms 403 
2018-11-12 15:25:45.215 +07:00 [Information] User profile is available. Using '"C:\Users\quyenth\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2018-11-12 15:25:45.321 +07:00 [Information] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-12 15:25:45.622 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/api/values  
2018-11-12 15:25:45.798 +07:00 [Information] Executing action method "Application.IdentityServer.Controllers.ValuesController.Get (Application.IdentityServer)" with arguments (null) - ModelState is Valid
2018-11-12 15:25:45.804 +07:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2018-11-12 15:25:45.843 +07:00 [Information] Executed action "Application.IdentityServer.Controllers.ValuesController.Get (Application.IdentityServer)" in 49.9016ms
2018-11-12 15:25:45.851 +07:00 [Information] Request finished in 236.0072ms 200 application/json; charset=utf-8
2018-11-12 15:25:48.501 +07:00 [Information] Request starting HTTP/1.1 POST http://localhost:57906/connect/userinfo text/plain 31
2018-11-12 15:25:48.702 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.UserInfoEndpoint" for "/connect/userinfo"
2018-11-12 15:25:49.484 +07:00 [Information] Entity Framework Core "2.1.4-rtm-31024" initialized '"ApplicationIdentityContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=AspNetCore "
2018-11-12 15:25:53.344 +07:00 [Information] Executed DbCommand ("144"ms) [Parameters=["@__get_Item_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[FullName], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[SecurityStamp], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0"
2018-11-12 15:25:53.504 +07:00 [Error] Checking for expected scope openid failed
"{
  \"ValidateLifetime\": true,
  \"AccessTokenType\": \"Jwt\",
  \"ExpectedScope\": \"openid\",
  \"JwtId\": \"71eb6f0ddc1a96d80674c18c0b236757\",
  \"Claims\": {
    \"nbf\": 1542010685,
    \"exp\": 1542014285,
    \"iss\": \"http://localhost:57906\",
    \"aud\": [
      \"http://localhost:57906/resources\",
      \"api2\"
    ],
    \"client_id\": \"ApiApplication\",
    \"sub\": \"7add0627-9b36-4ab4-83f8-6c5fc986b885\",
    \"auth_time\": 1542010684,
    \"idp\": \"local\",
    \"username\": \"quyenth@gmail.com\",
    \"email\": \"quyenth@gmail.com\",
    \"fullname\": \"Thais hong quyen\",
    \"jti\": \"71eb6f0ddc1a96d80674c18c0b236757\",
    \"scope\": \"api2\",
    \"amr\": \"pwd\"
  }
}"
2018-11-12 15:25:53.512 +07:00 [Information] Request finished in 5011.5576ms 403 
2018-11-12 15:26:17.400 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/api/account/signin?username=quyenth@gmail.com&password=Admin@123&scope=api2  
2018-11-12 15:26:17.444 +07:00 [Information] Executing action method "Application.IdentityServer.Controllers.AccountController.Signin (Application.IdentityServer)" with arguments (["quyenth@gmail.com", "Admin@123", "ApiApplication", "secret", "api2"]) - ModelState is Valid
2018-11-12 15:26:17.489 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/.well-known/openid-configuration  
2018-11-12 15:26:17.492 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryEndpoint" for "/.well-known/openid-configuration"
2018-11-12 15:26:17.525 +07:00 [Information] Request finished in 35.6786ms 200 application/json; charset=UTF-8
2018-11-12 15:26:17.551 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/.well-known/openid-configuration/jwks  
2018-11-12 15:26:17.552 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryKeyEndpoint" for "/.well-known/openid-configuration/jwks"
2018-11-12 15:26:17.571 +07:00 [Information] Request finished in 20.2933ms 200 application/json; charset=UTF-8
2018-11-12 15:26:17.596 +07:00 [Information] Request starting HTTP/1.1 POST http://localhost:57906/connect/token application/x-www-form-urlencoded 80
2018-11-12 15:26:17.599 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.TokenEndpoint" for "/connect/token"
2018-11-12 15:26:17.674 +07:00 [Information] Entity Framework Core "2.1.4-rtm-31024" initialized '"ApplicationIdentityContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=AspNetCore "
2018-11-12 15:26:17.713 +07:00 [Information] Executed DbCommand ("6"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [AspNetUsers] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0"
2018-11-12 15:26:17.744 +07:00 [Information] Credentials validated for username: "quyenth@gmail.com"
2018-11-12 15:26:17.752 +07:00 [Information] Token request validation success
"{
  \"ClientId\": \"ApiApplication\",
  \"GrantType\": \"password\",
  \"Scopes\": \"api2\",
  \"UserName\": \"quyenth@gmail.com\",
  \"Raw\": {
    \"grant_type\": \"password\",
    \"username\": \"quyenth@gmail.com\",
    \"password\": \"***REDACTED***\",
    \"scope\": \"api2\"
  }
}"
2018-11-12 15:26:17.868 +07:00 [Information] Executed DbCommand ("2"ms) [Parameters=["@__user_Id_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0"
2018-11-12 15:26:17.936 +07:00 [Information] Executed DbCommand ("21"ms) [Parameters=["@__userId_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0"
2018-11-12 15:26:17.945 +07:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0"
2018-11-12 15:26:17.946 +07:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__user_Id_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0"
2018-11-12 15:26:17.981 +07:00 [Information] Request finished in 385.4456ms 200 application/json; charset=UTF-8
2018-11-12 15:26:17.983 +07:00 [Information] Entity Framework Core "2.1.4-rtm-31024" initialized '"ApplicationIdentityContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=AspNetCore "
2018-11-12 15:26:17.986 +07:00 [Information] Executed DbCommand ("2"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [AspNetUsers] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0"
2018-11-12 15:26:17.991 +07:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [AspNetUsers] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0"
2018-11-12 15:26:18.008 +07:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2018-11-12 15:26:18.019 +07:00 [Information] Executed action "Application.IdentityServer.Controllers.AccountController.Signin (Application.IdentityServer)" in 595.9664ms
2018-11-12 15:26:18.019 +07:00 [Information] Request finished in 619.7727ms 200 application/json; charset=utf-8
2018-11-12 15:26:31.851 +07:00 [Information] Request starting HTTP/1.1 POST http://localhost:57906/connect/userinfo text/plain 31
2018-11-12 15:26:31.852 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.UserInfoEndpoint" for "/connect/userinfo"
2018-11-12 15:26:31.856 +07:00 [Information] Entity Framework Core "2.1.4-rtm-31024" initialized '"ApplicationIdentityContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=AspNetCore "
2018-11-12 15:26:31.872 +07:00 [Information] Executed DbCommand ("13"ms) [Parameters=["@__get_Item_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[FullName], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[SecurityStamp], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0"
2018-11-12 15:26:31.873 +07:00 [Error] Checking for expected scope openid failed
"{
  \"ValidateLifetime\": true,
  \"AccessTokenType\": \"Jwt\",
  \"ExpectedScope\": \"openid\",
  \"JwtId\": \"d3702ad73283181c215c3b563e82ec43\",
  \"Claims\": {
    \"nbf\": 1542011177,
    \"exp\": 1542014777,
    \"iss\": \"http://localhost:57906\",
    \"aud\": [
      \"http://localhost:57906/resources\",
      \"api2\"
    ],
    \"client_id\": \"ApiApplication\",
    \"sub\": \"7add0627-9b36-4ab4-83f8-6c5fc986b885\",
    \"auth_time\": 1542011177,
    \"idp\": \"local\",
    \"username\": \"quyenth@gmail.com\",
    \"email\": \"quyenth@gmail.com\",
    \"fullname\": \"Thais hong quyen\",
    \"jti\": \"d3702ad73283181c215c3b563e82ec43\",
    \"scope\": \"api2\",
    \"amr\": \"pwd\"
  }
}"
2018-11-12 15:26:31.874 +07:00 [Information] Request finished in 23.1568ms 403 
2018-11-12 15:26:47.443 +07:00 [Information] Request starting HTTP/1.1 POST http://localhost:57906/connect/userinfo text/plain 31
2018-11-12 15:26:47.444 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.UserInfoEndpoint" for "/connect/userinfo"
2018-11-12 15:26:47.447 +07:00 [Information] Entity Framework Core "2.1.4-rtm-31024" initialized '"ApplicationIdentityContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=AspNetCore "
2018-11-12 15:26:47.448 +07:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__get_Item_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[FullName], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[SecurityStamp], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0"
2018-11-12 15:26:47.449 +07:00 [Error] Checking for expected scope openid failed
"{
  \"ValidateLifetime\": true,
  \"AccessTokenType\": \"Jwt\",
  \"ExpectedScope\": \"openid\",
  \"JwtId\": \"d3702ad73283181c215c3b563e82ec43\",
  \"Claims\": {
    \"nbf\": 1542011177,
    \"exp\": 1542014777,
    \"iss\": \"http://localhost:57906\",
    \"aud\": [
      \"http://localhost:57906/resources\",
      \"api2\"
    ],
    \"client_id\": \"ApiApplication\",
    \"sub\": \"7add0627-9b36-4ab4-83f8-6c5fc986b885\",
    \"auth_time\": 1542011177,
    \"idp\": \"local\",
    \"username\": \"quyenth@gmail.com\",
    \"email\": \"quyenth@gmail.com\",
    \"fullname\": \"Thais hong quyen\",
    \"jti\": \"d3702ad73283181c215c3b563e82ec43\",
    \"scope\": \"api2\",
    \"amr\": \"pwd\"
  }
}"
2018-11-12 15:26:47.449 +07:00 [Information] Request finished in 5.6948ms 403 
2018-11-12 15:55:45.362 +07:00 [Information] Request starting HTTP/1.1 POST http://localhost:57906/connect/userinfo text/plain 31
2018-11-12 15:55:45.362 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.UserInfoEndpoint" for "/connect/userinfo"
2018-11-12 15:55:45.365 +07:00 [Information] Entity Framework Core "2.1.4-rtm-31024" initialized '"ApplicationIdentityContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=AspNetCore "
2018-11-12 15:55:48.788 +07:00 [Information] Executed DbCommand ("43"ms) [Parameters=["@__get_Item_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[FullName], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[SecurityStamp], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0"
2018-11-12 15:55:48.788 +07:00 [Error] Checking for expected scope openid failed
"{
  \"ValidateLifetime\": true,
  \"AccessTokenType\": \"Jwt\",
  \"ExpectedScope\": \"openid\",
  \"JwtId\": \"d3702ad73283181c215c3b563e82ec43\",
  \"Claims\": {
    \"nbf\": 1542011177,
    \"exp\": 1542014777,
    \"iss\": \"http://localhost:57906\",
    \"aud\": [
      \"http://localhost:57906/resources\",
      \"api2\"
    ],
    \"client_id\": \"ApiApplication\",
    \"sub\": \"7add0627-9b36-4ab4-83f8-6c5fc986b885\",
    \"auth_time\": 1542011177,
    \"idp\": \"local\",
    \"username\": \"quyenth@gmail.com\",
    \"email\": \"quyenth@gmail.com\",
    \"fullname\": \"Thais hong quyen\",
    \"jti\": \"d3702ad73283181c215c3b563e82ec43\",
    \"scope\": \"api2\",
    \"amr\": \"pwd\"
  }
}"
2018-11-12 15:55:48.789 +07:00 [Information] Request finished in 3427.1541ms 403 
2018-11-12 15:56:05.938 +07:00 [Information] User profile is available. Using '"C:\Users\quyenth\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2018-11-12 15:56:06.339 +07:00 [Information] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-12 15:56:06.861 +07:00 [Information] Request starting HTTP/1.1 DEBUG http://localhost:57906/  0
2018-11-12 15:56:06.861 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/api/values  
2018-11-12 15:56:06.960 +07:00 [Information] Request finished in 107.071ms 200 
2018-11-12 15:56:07.369 +07:00 [Information] Executing action method "Application.IdentityServer.Controllers.ValuesController.Get (Application.IdentityServer)" with arguments (null) - ModelState is Valid
2018-11-12 15:56:07.393 +07:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2018-11-12 15:56:07.458 +07:00 [Information] Executed action "Application.IdentityServer.Controllers.ValuesController.Get (Application.IdentityServer)" in 105.2658ms
2018-11-12 15:56:07.480 +07:00 [Information] Request finished in 629.3338ms 200 application/json; charset=utf-8
2018-11-12 15:56:09.574 +07:00 [Information] Request starting HTTP/1.1 POST http://localhost:57906/connect/userinfo text/plain 31
2018-11-12 15:56:09.834 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.UserInfoEndpoint" for "/connect/userinfo"
2018-11-12 15:56:10.953 +07:00 [Information] Entity Framework Core "2.1.4-rtm-31024" initialized '"ApplicationIdentityContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=AspNetCore "
2018-11-12 15:56:15.107 +07:00 [Information] Executed DbCommand ("166"ms) [Parameters=["@__get_Item_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[FullName], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[SecurityStamp], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0"
2018-11-12 15:56:15.279 +07:00 [Error] Checking for expected scope openid failed
"{
  \"ValidateLifetime\": true,
  \"AccessTokenType\": \"Jwt\",
  \"ExpectedScope\": \"openid\",
  \"JwtId\": \"d3702ad73283181c215c3b563e82ec43\",
  \"Claims\": {
    \"nbf\": 1542011177,
    \"exp\": 1542014777,
    \"iss\": \"http://localhost:57906\",
    \"aud\": [
      \"http://localhost:57906/resources\",
      \"api2\"
    ],
    \"client_id\": \"ApiApplication\",
    \"sub\": \"7add0627-9b36-4ab4-83f8-6c5fc986b885\",
    \"auth_time\": 1542011177,
    \"idp\": \"local\",
    \"username\": \"quyenth@gmail.com\",
    \"email\": \"quyenth@gmail.com\",
    \"fullname\": \"Thais hong quyen\",
    \"jti\": \"d3702ad73283181c215c3b563e82ec43\",
    \"scope\": \"api2\",
    \"amr\": \"pwd\"
  }
}"
2018-11-12 15:56:15.326 +07:00 [Information] Request finished in 5752.0263ms 403 
2018-11-12 16:12:37.615 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/connect/userinfo  
2018-11-12 16:12:37.642 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.UserInfoEndpoint" for "/connect/userinfo"
2018-11-12 16:12:37.676 +07:00 [Information] Entity Framework Core "2.1.4-rtm-31024" initialized '"ApplicationIdentityContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=AspNetCore "
2018-11-12 16:12:40.842 +07:00 [Information] Executed DbCommand ("22"ms) [Parameters=["@__get_Item_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[FullName], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[SecurityStamp], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0"
2018-11-12 16:12:40.870 +07:00 [Error] Checking for expected scope openid failed
"{
  \"ValidateLifetime\": true,
  \"AccessTokenType\": \"Jwt\",
  \"ExpectedScope\": \"openid\",
  \"JwtId\": \"d3702ad73283181c215c3b563e82ec43\",
  \"Claims\": {
    \"nbf\": 1542011177,
    \"exp\": 1542014777,
    \"iss\": \"http://localhost:57906\",
    \"aud\": [
      \"http://localhost:57906/resources\",
      \"api2\"
    ],
    \"client_id\": \"ApiApplication\",
    \"sub\": \"7add0627-9b36-4ab4-83f8-6c5fc986b885\",
    \"auth_time\": 1542011177,
    \"idp\": \"local\",
    \"username\": \"quyenth@gmail.com\",
    \"email\": \"quyenth@gmail.com\",
    \"fullname\": \"Thais hong quyen\",
    \"jti\": \"d3702ad73283181c215c3b563e82ec43\",
    \"scope\": \"api2\",
    \"amr\": \"pwd\"
  }
}"
2018-11-12 16:12:40.919 +07:00 [Information] Request finished in 3304.0115ms 403 
2018-11-12 16:12:51.792 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/api/account/signin?username=quyenth@gmail.com&password=Admin@123&scope=api2  
2018-11-12 16:12:51.886 +07:00 [Information] Executing action method "Application.IdentityServer.Controllers.AccountController.Signin (Application.IdentityServer)" with arguments (["quyenth@gmail.com", "Admin@123", "ApiApplication", "secret", "api2"]) - ModelState is Valid
2018-11-12 16:12:53.799 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/.well-known/openid-configuration  
2018-11-12 16:12:53.813 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryEndpoint" for "/.well-known/openid-configuration"
2018-11-12 16:12:53.860 +07:00 [Information] Request finished in 61.045ms 200 application/json; charset=UTF-8
2018-11-12 16:12:53.954 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/.well-known/openid-configuration/jwks  
2018-11-12 16:12:53.976 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryKeyEndpoint" for "/.well-known/openid-configuration/jwks"
2018-11-12 16:12:54.020 +07:00 [Information] Request finished in 65.7716ms 200 application/json; charset=UTF-8
2018-11-12 16:12:54.056 +07:00 [Information] Request starting HTTP/1.1 POST http://localhost:57906/connect/token application/x-www-form-urlencoded 80
2018-11-12 16:12:54.074 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.TokenEndpoint" for "/connect/token"
2018-11-12 16:12:54.219 +07:00 [Information] Entity Framework Core "2.1.4-rtm-31024" initialized '"ApplicationIdentityContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=AspNetCore "
2018-11-12 16:12:54.267 +07:00 [Information] Executed DbCommand ("8"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [AspNetUsers] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0"
2018-11-12 16:12:54.333 +07:00 [Information] Credentials validated for username: "quyenth@gmail.com"
2018-11-12 16:12:54.357 +07:00 [Information] Token request validation success
"{
  \"ClientId\": \"ApiApplication\",
  \"GrantType\": \"password\",
  \"Scopes\": \"api2\",
  \"UserName\": \"quyenth@gmail.com\",
  \"Raw\": {
    \"grant_type\": \"password\",
    \"username\": \"quyenth@gmail.com\",
    \"password\": \"***REDACTED***\",
    \"scope\": \"api2\"
  }
}"
2018-11-12 16:12:57.140 +07:00 [Information] Executed DbCommand ("5"ms) [Parameters=["@__user_Id_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0"
2018-11-12 16:12:57.238 +07:00 [Information] Executed DbCommand ("28"ms) [Parameters=["@__userId_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0"
2018-11-12 16:12:57.263 +07:00 [Information] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0"
2018-11-12 16:12:57.285 +07:00 [Information] Executed DbCommand ("3"ms) [Parameters=["@__user_Id_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0"
2018-11-12 16:12:57.366 +07:00 [Information] Request finished in 3310.325ms 200 application/json; charset=UTF-8
2018-11-12 16:12:58.405 +07:00 [Information] Entity Framework Core "2.1.4-rtm-31024" initialized '"ApplicationIdentityContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=AspNetCore "
2018-11-12 16:12:58.418 +07:00 [Information] Executed DbCommand ("4"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [AspNetUsers] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0"
2018-11-12 16:12:58.447 +07:00 [Information] Executed DbCommand ("3"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [AspNetUsers] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0"
2018-11-12 16:12:58.480 +07:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2018-11-12 16:12:58.498 +07:00 [Information] Executed action "Application.IdentityServer.Controllers.AccountController.Signin (Application.IdentityServer)" in 6649.9821ms
2018-11-12 16:12:58.527 +07:00 [Information] Request finished in 6733.2346ms 200 application/json; charset=utf-8
2018-11-12 16:13:10.820 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/connect/userinfo  
2018-11-12 16:13:10.836 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.UserInfoEndpoint" for "/connect/userinfo"
2018-11-12 16:13:10.861 +07:00 [Information] Entity Framework Core "2.1.4-rtm-31024" initialized '"ApplicationIdentityContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=AspNetCore "
2018-11-12 16:13:10.873 +07:00 [Information] Executed DbCommand ("3"ms) [Parameters=["@__get_Item_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[FullName], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[SecurityStamp], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0"
2018-11-12 16:13:10.882 +07:00 [Error] Checking for expected scope openid failed
"{
  \"ValidateLifetime\": true,
  \"AccessTokenType\": \"Jwt\",
  \"ExpectedScope\": \"openid\",
  \"JwtId\": \"9aab3fc9b564f9592c7e1b1b4fc9d084\",
  \"Claims\": {
    \"nbf\": 1542013977,
    \"exp\": 1542017577,
    \"iss\": \"http://localhost:57906\",
    \"aud\": [
      \"http://localhost:57906/resources\",
      \"api2\"
    ],
    \"client_id\": \"ApiApplication\",
    \"sub\": \"7add0627-9b36-4ab4-83f8-6c5fc986b885\",
    \"auth_time\": 1542013974,
    \"idp\": \"local\",
    \"username\": \"quyenth@gmail.com\",
    \"email\": \"quyenth@gmail.com\",
    \"fullname\": \"Thais hong quyen\",
    \"jti\": \"9aab3fc9b564f9592c7e1b1b4fc9d084\",
    \"scope\": \"api2\",
    \"amr\": \"pwd\"
  }
}"
2018-11-12 16:13:10.890 +07:00 [Information] Request finished in 70.4755ms 403 
2018-11-12 16:13:13.785 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/connect/userinfo  
2018-11-12 16:13:13.809 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.UserInfoEndpoint" for "/connect/userinfo"
2018-11-12 16:13:13.829 +07:00 [Information] Entity Framework Core "2.1.4-rtm-31024" initialized '"ApplicationIdentityContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=AspNetCore "
2018-11-12 16:13:13.838 +07:00 [Information] Executed DbCommand ("3"ms) [Parameters=["@__get_Item_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[FullName], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[SecurityStamp], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0"
2018-11-12 16:13:13.847 +07:00 [Error] Checking for expected scope openid failed
"{
  \"ValidateLifetime\": true,
  \"AccessTokenType\": \"Jwt\",
  \"ExpectedScope\": \"openid\",
  \"JwtId\": \"9aab3fc9b564f9592c7e1b1b4fc9d084\",
  \"Claims\": {
    \"nbf\": 1542013977,
    \"exp\": 1542017577,
    \"iss\": \"http://localhost:57906\",
    \"aud\": [
      \"http://localhost:57906/resources\",
      \"api2\"
    ],
    \"client_id\": \"ApiApplication\",
    \"sub\": \"7add0627-9b36-4ab4-83f8-6c5fc986b885\",
    \"auth_time\": 1542013974,
    \"idp\": \"local\",
    \"username\": \"quyenth@gmail.com\",
    \"email\": \"quyenth@gmail.com\",
    \"fullname\": \"Thais hong quyen\",
    \"jti\": \"9aab3fc9b564f9592c7e1b1b4fc9d084\",
    \"scope\": \"api2\",
    \"amr\": \"pwd\"
  }
}"
2018-11-12 16:13:13.854 +07:00 [Information] Request finished in 69.5121ms 403 
2018-11-12 16:13:56.306 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/connect/userinfo  
2018-11-12 16:13:56.336 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.UserInfoEndpoint" for "/connect/userinfo"
2018-11-12 16:13:56.354 +07:00 [Information] Entity Framework Core "2.1.4-rtm-31024" initialized '"ApplicationIdentityContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=AspNetCore "
2018-11-12 16:13:56.366 +07:00 [Information] Executed DbCommand ("3"ms) [Parameters=["@__get_Item_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[FullName], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[SecurityStamp], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0"
2018-11-12 16:13:56.376 +07:00 [Error] Checking for expected scope openid failed
"{
  \"ValidateLifetime\": true,
  \"AccessTokenType\": \"Jwt\",
  \"ExpectedScope\": \"openid\",
  \"JwtId\": \"9aab3fc9b564f9592c7e1b1b4fc9d084\",
  \"Claims\": {
    \"nbf\": 1542013977,
    \"exp\": 1542017577,
    \"iss\": \"http://localhost:57906\",
    \"aud\": [
      \"http://localhost:57906/resources\",
      \"api2\"
    ],
    \"client_id\": \"ApiApplication\",
    \"sub\": \"7add0627-9b36-4ab4-83f8-6c5fc986b885\",
    \"auth_time\": 1542013974,
    \"idp\": \"local\",
    \"username\": \"quyenth@gmail.com\",
    \"email\": \"quyenth@gmail.com\",
    \"fullname\": \"Thais hong quyen\",
    \"jti\": \"9aab3fc9b564f9592c7e1b1b4fc9d084\",
    \"scope\": \"api2\",
    \"amr\": \"pwd\"
  }
}"
2018-11-12 16:13:56.384 +07:00 [Information] Request finished in 77.5773ms 403 
2018-11-12 16:18:09.025 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/connect/userinfo  
2018-11-12 16:18:09.050 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.UserInfoEndpoint" for "/connect/userinfo"
2018-11-12 16:18:09.081 +07:00 [Information] Entity Framework Core "2.1.4-rtm-31024" initialized '"ApplicationIdentityContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=AspNetCore "
2018-11-12 16:18:09.097 +07:00 [Information] Executed DbCommand ("8"ms) [Parameters=["@__get_Item_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[FullName], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[SecurityStamp], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0"
2018-11-12 16:18:09.109 +07:00 [Error] Checking for expected scope openid failed
"{
  \"ValidateLifetime\": true,
  \"AccessTokenType\": \"Jwt\",
  \"ExpectedScope\": \"openid\",
  \"JwtId\": \"9aab3fc9b564f9592c7e1b1b4fc9d084\",
  \"Claims\": {
    \"nbf\": 1542013977,
    \"exp\": 1542017577,
    \"iss\": \"http://localhost:57906\",
    \"aud\": [
      \"http://localhost:57906/resources\",
      \"api2\"
    ],
    \"client_id\": \"ApiApplication\",
    \"sub\": \"7add0627-9b36-4ab4-83f8-6c5fc986b885\",
    \"auth_time\": 1542013974,
    \"idp\": \"local\",
    \"username\": \"quyenth@gmail.com\",
    \"email\": \"quyenth@gmail.com\",
    \"fullname\": \"Thais hong quyen\",
    \"jti\": \"9aab3fc9b564f9592c7e1b1b4fc9d084\",
    \"scope\": \"api2\",
    \"amr\": \"pwd\"
  }
}"
2018-11-12 16:18:09.118 +07:00 [Information] Request finished in 93.2135ms 403 
2018-11-12 16:20:08.130 +07:00 [Information] User profile is available. Using '"C:\Users\quyenth\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2018-11-12 16:20:08.256 +07:00 [Information] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-12 16:20:08.602 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/api/values  
2018-11-12 16:20:08.777 +07:00 [Information] Executing action method "Application.IdentityServer.Controllers.ValuesController.Get (Application.IdentityServer)" with arguments (null) - ModelState is Valid
2018-11-12 16:20:08.784 +07:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2018-11-12 16:20:08.826 +07:00 [Information] Executed action "Application.IdentityServer.Controllers.ValuesController.Get (Application.IdentityServer)" in 52.7178ms
2018-11-12 16:20:08.831 +07:00 [Information] Request finished in 233.8042ms 200 application/json; charset=utf-8
2018-11-12 16:21:21.088 +07:00 [Information] User profile is available. Using '"C:\Users\quyenth\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2018-11-12 16:21:21.190 +07:00 [Information] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-12 16:21:21.407 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/api/values  
2018-11-12 16:21:21.559 +07:00 [Information] Authorization failed for user: null.
2018-11-12 16:21:21.562 +07:00 [Information] Authorization failed for the request at filter '"Microsoft.AspNetCore.Mvc.Authorization.AuthorizeFilter"'.
2018-11-12 16:21:21.594 +07:00 [Information] Executing ChallengeResult with authentication schemes ([]).
2018-11-12 16:21:21.607 +07:00 [Information] AuthenticationScheme: "Identity.Application" was challenged.
2018-11-12 16:21:21.609 +07:00 [Information] Executed action "Application.IdentityServer.Controllers.ValuesController.Get (Application.IdentityServer)" in 53.1078ms
2018-11-12 16:21:21.613 +07:00 [Information] Request finished in 211.2153ms 302 
2018-11-12 16:21:21.626 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/account/login?returnUrl=%2Fapi%2Fvalues  
2018-11-12 16:21:21.628 +07:00 [Information] Request finished in 2.7101ms 404 
2018-11-12 16:21:51.169 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/api/values  
2018-11-12 16:21:51.170 +07:00 [Information] Authorization failed for user: null.
2018-11-12 16:21:51.170 +07:00 [Information] Authorization failed for the request at filter '"Microsoft.AspNetCore.Mvc.Authorization.AuthorizeFilter"'.
2018-11-12 16:21:51.171 +07:00 [Information] Executing ChallengeResult with authentication schemes ([]).
2018-11-12 16:21:51.171 +07:00 [Information] AuthenticationScheme: "Identity.Application" was challenged.
2018-11-12 16:21:51.171 +07:00 [Information] Executed action "Application.IdentityServer.Controllers.ValuesController.Get (Application.IdentityServer)" in 0.6705ms
2018-11-12 16:21:51.171 +07:00 [Information] Request finished in 1.9432ms 302 
2018-11-12 16:21:51.179 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/account/login?returnUrl=%2Fapi%2Fvalues  
2018-11-12 16:21:51.179 +07:00 [Information] Request finished in 0.5385ms 404 
2018-11-12 16:22:10.762 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/api/values  
2018-11-12 16:22:10.763 +07:00 [Information] Authorization failed for user: null.
2018-11-12 16:22:10.763 +07:00 [Information] Authorization failed for the request at filter '"Microsoft.AspNetCore.Mvc.Authorization.AuthorizeFilter"'.
2018-11-12 16:22:10.763 +07:00 [Information] Executing ChallengeResult with authentication schemes ([]).
2018-11-12 16:22:10.763 +07:00 [Information] AuthenticationScheme: "Identity.Application" was challenged.
2018-11-12 16:22:10.763 +07:00 [Information] Executed action "Application.IdentityServer.Controllers.ValuesController.Get (Application.IdentityServer)" in 0.6052ms
2018-11-12 16:22:10.763 +07:00 [Information] Request finished in 1.619ms 302 
2018-11-12 16:22:10.805 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/account/login?returnUrl=%2Fapi%2Fvalues  
2018-11-12 16:22:10.806 +07:00 [Information] Request finished in 0.7167ms 404 
2018-11-12 16:28:56.602 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/api/values  
2018-11-12 16:28:56.603 +07:00 [Information] Authorization failed for user: null.
2018-11-12 16:28:56.603 +07:00 [Information] Authorization failed for the request at filter '"Microsoft.AspNetCore.Mvc.Authorization.AuthorizeFilter"'.
2018-11-12 16:28:56.603 +07:00 [Information] Executing ChallengeResult with authentication schemes ([]).
2018-11-12 16:28:56.603 +07:00 [Information] AuthenticationScheme: "Identity.Application" was challenged.
2018-11-12 16:28:56.603 +07:00 [Information] Executed action "Application.IdentityServer.Controllers.ValuesController.Get (Application.IdentityServer)" in 0.3395ms
2018-11-12 16:28:56.603 +07:00 [Information] Request finished in 1.1192ms 302 
2018-11-12 16:28:56.614 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/account/login?returnUrl=%2Fapi%2Fvalues  
2018-11-12 16:28:56.615 +07:00 [Information] Request finished in 0.5137ms 404 
2018-11-12 16:28:59.513 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/api/values  
2018-11-12 16:28:59.514 +07:00 [Information] Authorization failed for user: null.
2018-11-12 16:28:59.514 +07:00 [Information] Authorization failed for the request at filter '"Microsoft.AspNetCore.Mvc.Authorization.AuthorizeFilter"'.
2018-11-12 16:28:59.514 +07:00 [Information] Executing ChallengeResult with authentication schemes ([]).
2018-11-12 16:28:59.514 +07:00 [Information] AuthenticationScheme: "Identity.Application" was challenged.
2018-11-12 16:28:59.514 +07:00 [Information] Executed action "Application.IdentityServer.Controllers.ValuesController.Get (Application.IdentityServer)" in 0.2882ms
2018-11-12 16:28:59.514 +07:00 [Information] Request finished in 0.9941ms 302 
2018-11-12 16:28:59.518 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/account/login?returnUrl=%2Fapi%2Fvalues  
2018-11-12 16:28:59.518 +07:00 [Information] Request finished in 0.5345ms 404 
2018-11-12 16:29:06.080 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/api/values  
2018-11-12 16:29:06.080 +07:00 [Information] Authorization failed for user: null.
2018-11-12 16:29:06.080 +07:00 [Information] Authorization failed for the request at filter '"Microsoft.AspNetCore.Mvc.Authorization.AuthorizeFilter"'.
2018-11-12 16:29:06.081 +07:00 [Information] Executing ChallengeResult with authentication schemes ([]).
2018-11-12 16:29:06.081 +07:00 [Information] AuthenticationScheme: "Identity.Application" was challenged.
2018-11-12 16:29:06.081 +07:00 [Information] Executed action "Application.IdentityServer.Controllers.ValuesController.Get (Application.IdentityServer)" in 0.299ms
2018-11-12 16:29:06.081 +07:00 [Information] Request finished in 1.0303ms 302 
2018-11-12 16:29:06.086 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/account/login?returnUrl=%2Fapi%2Fvalues  
2018-11-12 16:29:06.087 +07:00 [Information] Request finished in 0.9995ms 404 
2018-11-12 16:29:18.697 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/api/values  
2018-11-12 16:29:18.700 +07:00 [Information] Authorization failed for user: null.
2018-11-12 16:29:18.700 +07:00 [Information] Authorization failed for the request at filter '"Microsoft.AspNetCore.Mvc.Authorization.AuthorizeFilter"'.
2018-11-12 16:29:18.700 +07:00 [Information] Executing ChallengeResult with authentication schemes ([]).
2018-11-12 16:29:18.701 +07:00 [Information] AuthenticationScheme: "Identity.Application" was challenged.
2018-11-12 16:29:18.701 +07:00 [Information] Executed action "Application.IdentityServer.Controllers.ValuesController.Get (Application.IdentityServer)" in 0.4113ms
2018-11-12 16:29:18.701 +07:00 [Information] Request finished in 3.6113ms 302 
2018-11-12 16:29:18.704 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/account/login?returnUrl=%2Fapi%2Fvalues  
2018-11-12 16:29:18.705 +07:00 [Information] Request finished in 0.6494ms 404 
2018-11-12 16:31:00.148 +07:00 [Information] User profile is available. Using '"C:\Users\quyenth\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2018-11-12 16:31:00.458 +07:00 [Information] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-12 16:31:01.058 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/api/values  
2018-11-12 16:31:01.058 +07:00 [Information] Request starting HTTP/1.1 DEBUG http://localhost:57906/  0
2018-11-12 16:31:01.237 +07:00 [Information] Request finished in 178.9076ms 200 
2018-11-12 16:31:01.660 +07:00 [Information] Authorization failed for user: null.
2018-11-12 16:31:01.671 +07:00 [Information] Authorization failed for the request at filter '"Microsoft.AspNetCore.Mvc.Authorization.AuthorizeFilter"'.
2018-11-12 16:31:01.681 +07:00 [Information] Executing ChallengeResult with authentication schemes ([]).
2018-11-12 16:31:01.690 +07:00 [Information] AuthenticationScheme: "Identity.Application" was challenged.
2018-11-12 16:31:01.699 +07:00 [Information] Executed action "Application.IdentityServer.Controllers.ValuesController.Get (Application.IdentityServer)" in 49.1108ms
2018-11-12 16:31:01.712 +07:00 [Information] Request finished in 664.2937ms 302 
2018-11-12 16:31:01.718 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/account/login?returnUrl=%2Fapi%2Fvalues  
2018-11-12 16:31:01.777 +07:00 [Information] Request finished in 59.4838ms 404 
2018-11-12 16:31:05.707 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/api/values  
2018-11-12 16:31:05.734 +07:00 [Information] Authorization failed for user: null.
2018-11-12 16:31:05.736 +07:00 [Information] Authorization failed for the request at filter '"Microsoft.AspNetCore.Mvc.Authorization.AuthorizeFilter"'.
2018-11-12 16:31:05.739 +07:00 [Information] Executing ChallengeResult with authentication schemes ([]).
2018-11-12 16:31:05.741 +07:00 [Information] AuthenticationScheme: "Identity.Application" was challenged.
2018-11-12 16:31:05.743 +07:00 [Information] Executed action "Application.IdentityServer.Controllers.ValuesController.Get (Application.IdentityServer)" in 9.4669ms
2018-11-12 16:31:05.748 +07:00 [Information] Request finished in 41.3216ms 302 
2018-11-12 16:31:05.757 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/account/login?returnUrl=%2Fapi%2Fvalues  
2018-11-12 16:31:05.777 +07:00 [Information] Request finished in 20.2468ms 404 
2018-11-12 16:31:26.148 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/api/account/signin?username=quyenth@gmail.com&password=Admin@123&scope=api2  
2018-11-12 16:31:26.539 +07:00 [Information] Executing action method "Application.IdentityServer.Controllers.AccountController.Signin (Application.IdentityServer)" with arguments (["quyenth@gmail.com", "Admin@123", "ApiApplication", "secret", "api2"]) - ModelState is Valid
2018-11-12 16:31:40.747 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/.well-known/openid-configuration  
2018-11-12 16:31:40.763 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryEndpoint" for "/.well-known/openid-configuration"
2018-11-12 16:31:40.863 +07:00 [Information] Request finished in 116.5104ms 200 application/json; charset=UTF-8
2018-11-12 16:31:40.948 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/.well-known/openid-configuration/jwks  
2018-11-12 16:31:40.981 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryKeyEndpoint" for "/.well-known/openid-configuration/jwks"
2018-11-12 16:31:41.032 +07:00 [Information] Request finished in 84.0567ms 200 application/json; charset=UTF-8
2018-11-12 16:31:41.103 +07:00 [Information] Request starting HTTP/1.1 POST http://localhost:57906/connect/token application/x-www-form-urlencoded 80
2018-11-12 16:31:41.130 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.TokenEndpoint" for "/connect/token"
2018-11-12 16:31:42.299 +07:00 [Information] Entity Framework Core "2.1.4-rtm-31024" initialized '"ApplicationIdentityContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=AspNetCore "
2018-11-12 16:31:46.743 +07:00 [Information] Executed DbCommand ("165"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [AspNetUsers] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0"
2018-11-12 16:31:46.994 +07:00 [Information] Credentials validated for username: "quyenth@gmail.com"
2018-11-12 16:31:47.018 +07:00 [Information] Token request validation success
"{
  \"ClientId\": \"ApiApplication\",
  \"GrantType\": \"password\",
  \"Scopes\": \"api2\",
  \"UserName\": \"quyenth@gmail.com\",
  \"Raw\": {
    \"grant_type\": \"password\",
    \"username\": \"quyenth@gmail.com\",
    \"password\": \"***REDACTED***\",
    \"scope\": \"api2\"
  }
}"
2018-11-12 16:31:52.260 +07:00 [Information] Executed DbCommand ("7"ms) [Parameters=["@__user_Id_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0"
2018-11-12 16:31:52.405 +07:00 [Information] Executed DbCommand ("31"ms) [Parameters=["@__userId_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0"
2018-11-12 16:31:52.437 +07:00 [Information] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0"
2018-11-12 16:31:52.456 +07:00 [Information] Executed DbCommand ("3"ms) [Parameters=["@__user_Id_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0"
2018-11-12 16:31:52.660 +07:00 [Information] Request finished in 11557.8904ms 200 application/json; charset=UTF-8
2018-11-12 16:32:00.828 +07:00 [Information] Entity Framework Core "2.1.4-rtm-31024" initialized '"ApplicationIdentityContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=AspNetCore "
2018-11-12 16:32:00.849 +07:00 [Information] Executed DbCommand ("3"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [AspNetUsers] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0"
2018-11-12 16:32:00.882 +07:00 [Information] Executed DbCommand ("3"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [AspNetUsers] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0"
2018-11-12 16:32:00.923 +07:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2018-11-12 16:32:00.940 +07:00 [Information] Executed action "Application.IdentityServer.Controllers.AccountController.Signin (Application.IdentityServer)" in 34710.9042ms
2018-11-12 16:32:00.963 +07:00 [Information] Request finished in 34816.4221ms 200 application/json; charset=utf-8
2018-11-12 16:32:20.419 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/api/values  
2018-11-12 16:32:20.440 +07:00 [Information] Authorization failed for user: null.
2018-11-12 16:32:20.442 +07:00 [Information] Authorization failed for the request at filter '"Microsoft.AspNetCore.Mvc.Authorization.AuthorizeFilter"'.
2018-11-12 16:32:20.444 +07:00 [Information] Executing ChallengeResult with authentication schemes ([]).
2018-11-12 16:32:20.446 +07:00 [Information] AuthenticationScheme: "Identity.Application" was challenged.
2018-11-12 16:32:20.448 +07:00 [Information] Executed action "Application.IdentityServer.Controllers.ValuesController.Get (Application.IdentityServer)" in 7.3749ms
2018-11-12 16:32:20.453 +07:00 [Information] Request finished in 34.4456ms 302 
2018-11-12 16:32:20.461 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/account/login?returnUrl=%2Fapi%2Fvalues  
2018-11-12 16:32:20.487 +07:00 [Information] Request finished in 25.7777ms 404 
2018-11-12 16:32:48.432 +07:00 [Information] Request starting HTTP/1.1 POST http://127.0.0.1:15202/iisintegration  0
2018-11-12 16:32:48.441 +07:00 [Information] Request finished in 9.2457ms 202 
2018-11-12 16:33:48.289 +07:00 [Information] User profile is available. Using '"C:\Users\quyenth\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2018-11-12 16:33:48.438 +07:00 [Information] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-12 16:33:48.969 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/api/values  
2018-11-12 16:33:49.269 +07:00 [Information] Authorization failed for user: null.
2018-11-12 16:33:49.273 +07:00 [Information] Authorization failed for the request at filter '"Microsoft.AspNetCore.Mvc.Authorization.AuthorizeFilter"'.
2018-11-12 16:33:49.277 +07:00 [Information] Executing ChallengeResult with authentication schemes (["Bearer"]).
2018-11-12 16:33:49.391 +07:00 [Information] AuthenticationScheme: "BearerIdentityServerAuthenticationJwt" was challenged.
2018-11-12 16:33:49.392 +07:00 [Information] AuthenticationScheme: "Bearer" was challenged.
2018-11-12 16:33:49.398 +07:00 [Information] Executed action "Application.IdentityServer.Controllers.ValuesController.Get (Application.IdentityServer)" in 144.6599ms
2018-11-12 16:33:49.410 +07:00 [Information] Request finished in 451.5757ms 401 
2018-11-12 16:34:14.116 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/api/values  
2018-11-12 16:34:14.160 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/.well-known/openid-configuration  
2018-11-12 16:34:14.283 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryEndpoint" for "/.well-known/openid-configuration"
2018-11-12 16:34:14.360 +07:00 [Information] Request finished in 199.8666ms 200 application/json; charset=UTF-8
2018-11-12 16:34:14.405 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/.well-known/openid-configuration/jwks  
2018-11-12 16:34:14.406 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryKeyEndpoint" for "/.well-known/openid-configuration/jwks"
2018-11-12 16:34:14.426 +07:00 [Information] Request finished in 20.8432ms 200 application/json; charset=UTF-8
2018-11-12 16:34:14.506 +07:00 [Information] Successfully validated the token.
2018-11-12 16:34:14.507 +07:00 [Information] AuthenticationScheme: "BearerIdentityServerAuthenticationJwt" was successfully authenticated.
2018-11-12 16:34:14.507 +07:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2018-11-12 16:34:14.508 +07:00 [Information] Authorization was successful for user: "7add0627-9b36-4ab4-83f8-6c5fc986b885".
2018-11-12 16:34:14.514 +07:00 [Information] Executing action method "Application.IdentityServer.Controllers.ValuesController.Get (Application.IdentityServer)" with arguments (null) - ModelState is Valid
2018-11-12 16:34:14.518 +07:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2018-11-12 16:34:14.521 +07:00 [Information] Executed action "Application.IdentityServer.Controllers.ValuesController.Get (Application.IdentityServer)" in 397.511ms
2018-11-12 16:34:14.521 +07:00 [Information] Request finished in 404.8868ms 200 application/json; charset=utf-8
2018-11-12 16:34:18.158 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/api/values  
2018-11-12 16:34:18.159 +07:00 [Information] Successfully validated the token.
2018-11-12 16:34:18.159 +07:00 [Information] AuthenticationScheme: "BearerIdentityServerAuthenticationJwt" was successfully authenticated.
2018-11-12 16:34:18.160 +07:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2018-11-12 16:34:18.160 +07:00 [Information] Authorization was successful for user: "7add0627-9b36-4ab4-83f8-6c5fc986b885".
2018-11-12 16:34:18.160 +07:00 [Information] Executing action method "Application.IdentityServer.Controllers.ValuesController.Get (Application.IdentityServer)" with arguments (null) - ModelState is Valid
2018-11-12 16:34:18.161 +07:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2018-11-12 16:34:18.162 +07:00 [Information] Executed action "Application.IdentityServer.Controllers.ValuesController.Get (Application.IdentityServer)" in 3.1891ms
2018-11-12 16:34:18.162 +07:00 [Information] Request finished in 4.0056ms 200 application/json; charset=utf-8
2018-11-12 16:39:01.049 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/api/account/signin?username=quyenth@gmail.com&password=Admin@123&scope=openid  
2018-11-12 16:39:01.098 +07:00 [Information] Executing action method "Application.IdentityServer.Controllers.AccountController.Signin (Application.IdentityServer)" with arguments (["quyenth@gmail.com", "Admin@123", "ApiApplication", "secret", "openid"]) - ModelState is Valid
2018-11-12 16:39:01.118 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/.well-known/openid-configuration  
2018-11-12 16:39:01.118 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryEndpoint" for "/.well-known/openid-configuration"
2018-11-12 16:39:01.119 +07:00 [Information] Request finished in 1.1785ms 200 application/json; charset=UTF-8
2018-11-12 16:39:01.135 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/.well-known/openid-configuration/jwks  
2018-11-12 16:39:01.136 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryKeyEndpoint" for "/.well-known/openid-configuration/jwks"
2018-11-12 16:39:01.136 +07:00 [Information] Request finished in 1.44ms 200 application/json; charset=UTF-8
2018-11-12 16:39:01.172 +07:00 [Information] Request starting HTTP/1.1 POST http://localhost:57906/connect/token application/x-www-form-urlencoded 82
2018-11-12 16:39:01.177 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.TokenEndpoint" for "/connect/token"
2018-11-12 16:39:01.888 +07:00 [Information] Entity Framework Core "2.1.4-rtm-31024" initialized '"ApplicationIdentityContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=AspNetCore "
2018-11-12 16:39:11.556 +07:00 [Information] Executed DbCommand ("209"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [AspNetUsers] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0"
2018-11-12 16:39:11.738 +07:00 [Information] Credentials validated for username: "quyenth@gmail.com"
2018-11-12 16:39:11.761 +07:00 [Information] Token request validation success
"{
  \"ClientId\": \"ApiApplication\",
  \"GrantType\": \"password\",
  \"Scopes\": \"openid\",
  \"UserName\": \"quyenth@gmail.com\",
  \"Raw\": {
    \"grant_type\": \"password\",
    \"username\": \"quyenth@gmail.com\",
    \"password\": \"***REDACTED***\",
    \"scope\": \"openid\"
  }
}"
2018-11-12 16:39:11.942 +07:00 [Information] Executed DbCommand ("7"ms) [Parameters=["@__user_Id_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0"
2018-11-12 16:39:12.050 +07:00 [Information] Executed DbCommand ("42"ms) [Parameters=["@__userId_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0"
2018-11-12 16:39:12.067 +07:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0"
2018-11-12 16:39:12.069 +07:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__user_Id_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0"
2018-11-12 16:39:12.131 +07:00 [Information] Request finished in 10959.3238ms 200 application/json; charset=UTF-8
2018-11-12 16:39:12.135 +07:00 [Information] Entity Framework Core "2.1.4-rtm-31024" initialized '"ApplicationIdentityContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=AspNetCore "
2018-11-12 16:39:12.148 +07:00 [Information] Executed DbCommand ("5"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [AspNetUsers] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0"
2018-11-12 16:39:12.163 +07:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [AspNetUsers] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0"
2018-11-12 16:39:12.183 +07:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2018-11-12 16:39:12.208 +07:00 [Information] Executed action "Application.IdentityServer.Controllers.AccountController.Signin (Application.IdentityServer)" in 11128.627ms
2018-11-12 16:39:12.209 +07:00 [Information] Request finished in 11159.7838ms 200 application/json; charset=utf-8
2018-11-12 16:39:36.296 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/connect/userinfo  
2018-11-12 16:39:36.298 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.UserInfoEndpoint" for "/connect/userinfo"
2018-11-12 16:39:36.327 +07:00 [Information] Entity Framework Core "2.1.4-rtm-31024" initialized '"ApplicationIdentityContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=AspNetCore "
2018-11-12 16:39:36.338 +07:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__get_Item_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[FullName], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[SecurityStamp], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0"
2018-11-12 16:39:36.372 +07:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__user_Id_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0"
2018-11-12 16:39:36.374 +07:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__userId_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0"
2018-11-12 16:39:36.374 +07:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__userId_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0"
2018-11-12 16:39:36.375 +07:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__user_Id_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0"
2018-11-12 16:39:36.376 +07:00 [Information] Profile service returned to the following claim types: "username email fullname"
2018-11-12 16:39:36.378 +07:00 [Information] Request finished in 81.6608ms 200 application/json; charset=UTF-8
2018-11-12 16:41:34.485 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/swagger  
2018-11-12 16:41:34.486 +07:00 [Information] Request finished in 1.2758ms 404 
2018-11-12 16:42:29.688 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/swagger  
2018-11-12 16:42:29.690 +07:00 [Information] Request finished in 1.2168ms 404 
2018-11-12 16:51:23.710 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/api/account/signin?username=quyenth@gmail.com&password=Admin@123&scope=api2  
2018-11-12 16:51:23.712 +07:00 [Information] Executing action method "Application.IdentityServer.Controllers.AccountController.Signin (Application.IdentityServer)" with arguments (["quyenth@gmail.com", "Admin@123", "ApiApplication", "secret", "api2"]) - ModelState is Valid
2018-11-12 16:51:23.729 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/.well-known/openid-configuration  
2018-11-12 16:51:23.730 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryEndpoint" for "/.well-known/openid-configuration"
2018-11-12 16:51:23.730 +07:00 [Information] Request finished in 1.2783ms 200 application/json; charset=UTF-8
2018-11-12 16:51:23.733 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/.well-known/openid-configuration/jwks  
2018-11-12 16:51:23.734 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryKeyEndpoint" for "/.well-known/openid-configuration/jwks"
2018-11-12 16:51:23.735 +07:00 [Information] Request finished in 1.6028ms 200 application/json; charset=UTF-8
2018-11-12 16:51:23.748 +07:00 [Information] Request starting HTTP/1.1 POST http://localhost:57906/connect/token application/x-www-form-urlencoded 80
2018-11-12 16:51:23.749 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.TokenEndpoint" for "/connect/token"
2018-11-12 16:51:23.759 +07:00 [Information] Entity Framework Core "2.1.4-rtm-31024" initialized '"ApplicationIdentityContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=AspNetCore "
2018-11-12 16:51:26.435 +07:00 [Information] Executed DbCommand ("23"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [AspNetUsers] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0"
2018-11-12 16:51:26.452 +07:00 [Information] Credentials validated for username: "quyenth@gmail.com"
2018-11-12 16:51:26.452 +07:00 [Information] Token request validation success
"{
  \"ClientId\": \"ApiApplication\",
  \"GrantType\": \"password\",
  \"Scopes\": \"api2\",
  \"UserName\": \"quyenth@gmail.com\",
  \"Raw\": {
    \"grant_type\": \"password\",
    \"username\": \"quyenth@gmail.com\",
    \"password\": \"***REDACTED***\",
    \"scope\": \"api2\"
  }
}"
2018-11-12 16:51:26.455 +07:00 [Information] Executed DbCommand ("2"ms) [Parameters=["@__user_Id_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0"
2018-11-12 16:51:26.459 +07:00 [Information] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0"
2018-11-12 16:51:26.460 +07:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__userId_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0"
2018-11-12 16:51:26.461 +07:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__user_Id_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0"
2018-11-12 16:51:26.466 +07:00 [Information] Request finished in 2718.1953ms 200 application/json; charset=UTF-8
2018-11-12 16:51:26.467 +07:00 [Information] Entity Framework Core "2.1.4-rtm-31024" initialized '"ApplicationIdentityContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=AspNetCore "
2018-11-12 16:51:26.468 +07:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [AspNetUsers] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0"
2018-11-12 16:51:26.469 +07:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [AspNetUsers] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0"
2018-11-12 16:51:26.486 +07:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2018-11-12 16:51:26.486 +07:00 [Information] Executed action "Application.IdentityServer.Controllers.AccountController.Signin (Application.IdentityServer)" in 2775.7454ms
2018-11-12 16:51:26.487 +07:00 [Information] Request finished in 2776.7737ms 200 application/json; charset=utf-8
2018-11-12 16:51:30.187 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/api/account/signin?username=quyenth@gmail.com&password=Admin@123&scope=openid  
2018-11-12 16:51:30.187 +07:00 [Information] Executing action method "Application.IdentityServer.Controllers.AccountController.Signin (Application.IdentityServer)" with arguments (["quyenth@gmail.com", "Admin@123", "ApiApplication", "secret", "openid"]) - ModelState is Valid
2018-11-12 16:51:30.196 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/.well-known/openid-configuration  
2018-11-12 16:51:30.196 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryEndpoint" for "/.well-known/openid-configuration"
2018-11-12 16:51:30.197 +07:00 [Information] Request finished in 0.8772ms 200 application/json; charset=UTF-8
2018-11-12 16:51:30.201 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/.well-known/openid-configuration/jwks  
2018-11-12 16:51:30.201 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryKeyEndpoint" for "/.well-known/openid-configuration/jwks"
2018-11-12 16:51:30.201 +07:00 [Information] Request finished in 0.768ms 200 application/json; charset=UTF-8
2018-11-12 16:51:30.216 +07:00 [Information] Request starting HTTP/1.1 POST http://localhost:57906/connect/token application/x-www-form-urlencoded 82
2018-11-12 16:51:30.217 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.TokenEndpoint" for "/connect/token"
2018-11-12 16:51:30.218 +07:00 [Information] Entity Framework Core "2.1.4-rtm-31024" initialized '"ApplicationIdentityContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=AspNetCore "
2018-11-12 16:51:30.219 +07:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [AspNetUsers] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0"
2018-11-12 16:51:30.245 +07:00 [Information] Credentials validated for username: "quyenth@gmail.com"
2018-11-12 16:51:30.245 +07:00 [Information] Token request validation success
"{
  \"ClientId\": \"ApiApplication\",
  \"GrantType\": \"password\",
  \"Scopes\": \"openid\",
  \"UserName\": \"quyenth@gmail.com\",
  \"Raw\": {
    \"grant_type\": \"password\",
    \"username\": \"quyenth@gmail.com\",
    \"password\": \"***REDACTED***\",
    \"scope\": \"openid\"
  }
}"
2018-11-12 16:51:30.246 +07:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__user_Id_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0"
2018-11-12 16:51:30.247 +07:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__userId_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0"
2018-11-12 16:51:30.248 +07:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__userId_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0"
2018-11-12 16:51:30.249 +07:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__user_Id_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0"
2018-11-12 16:51:30.256 +07:00 [Information] Request finished in 39.853ms 200 application/json; charset=UTF-8
2018-11-12 16:51:30.257 +07:00 [Information] Entity Framework Core "2.1.4-rtm-31024" initialized '"ApplicationIdentityContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=AspNetCore "
2018-11-12 16:51:30.259 +07:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [AspNetUsers] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0"
2018-11-12 16:51:30.260 +07:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [AspNetUsers] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0"
2018-11-12 16:51:30.283 +07:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2018-11-12 16:51:30.283 +07:00 [Information] Executed action "Application.IdentityServer.Controllers.AccountController.Signin (Application.IdentityServer)" in 95.9088ms
2018-11-12 16:51:30.283 +07:00 [Information] Request finished in 96.611ms 200 application/json; charset=utf-8
2018-11-12 16:51:40.218 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/connect/userinfo  
2018-11-12 16:51:40.219 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.UserInfoEndpoint" for "/connect/userinfo"
2018-11-12 16:51:40.232 +07:00 [Information] Entity Framework Core "2.1.4-rtm-31024" initialized '"ApplicationIdentityContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=AspNetCore "
2018-11-12 16:51:40.236 +07:00 [Information] Executed DbCommand ("3"ms) [Parameters=["@__get_Item_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[FullName], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[SecurityStamp], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0"
2018-11-12 16:51:40.238 +07:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__user_Id_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0"
2018-11-12 16:51:40.239 +07:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__userId_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0"
2018-11-12 16:51:40.240 +07:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__userId_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0"
2018-11-12 16:51:40.241 +07:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__user_Id_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0"
2018-11-12 16:51:40.242 +07:00 [Information] Profile service returned to the following claim types: "username email fullname"
2018-11-12 16:51:40.242 +07:00 [Information] Request finished in 23.9551ms 200 application/json; charset=UTF-8
2018-11-12 16:51:52.233 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/api/values  
2018-11-12 16:51:52.237 +07:00 [Information] Failed to validate the token "eyJhbGciOiJSUzI1NiIsImtpZCI6Ijg5N2ExMWFmZmFiYzJhOWViN2M4MmI2ODVmZjhiZmRjIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1NDIwMTYyOTAsImV4cCI6MTU0MjAxOTg5MCwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1NzkwNiIsImF1ZCI6Imh0dHA6Ly9sb2NhbGhvc3Q6NTc5MDYvcmVzb3VyY2VzIiwiY2xpZW50X2lkIjoiQXBpQXBwbGljYXRpb24iLCJzdWIiOiI3YWRkMDYyNy05YjM2LTRhYjQtODNmOC02YzVmYzk4NmI4ODUiLCJhdXRoX3RpbWUiOjE1NDIwMTYyOTAsImlkcCI6ImxvY2FsIiwidXNlcm5hbWUiOiJxdXllbnRoQGdtYWlsLmNvbSIsImVtYWlsIjoicXV5ZW50aEBnbWFpbC5jb20iLCJmdWxsbmFtZSI6IlRoYWlzIGhvbmcgcXV5ZW4iLCJqdGkiOiI3NjlkMWNkODI3OTBmOWI4MjBlNWQ3NTA5NTlmNTgxNiIsInNjb3BlIjpbIm9wZW5pZCJdLCJhbXIiOlsicHdkIl19.pz6OzROfP5ogPlVjXxjWQzMMVXjW72101xuY4AXVOJQmxkO8d-9NgaFB3zfLPd85WmG25WsP8NHHYqlcbVREMRi2E22CGNli9SkftiMArP_o8EDo7l32n2ATya__WW9fyslEnp1MEm29bN7vuEPQ_bJTpbZeslGfoFp8npXC3el8W7Ykj0aredsZK1hLP2yRkr1ChQhekBhRKO5VbwXx06u84DAs9TKgdMQJX5g8JeP_He-VOz6W4dfA8frm3Rwft7drkU2ovx7useuus3RHIO4C7etGDgQKBNhj9t5-soEgfM9h0sIUdV1AG61jV79M6QxKPw999b5FREofGkbq1A".
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidAudienceException: IDX10214: Audience validation failed. Audiences: '[PII is hidden]'. Did not match: validationParameters.ValidAudience: '[PII is hidden]' or validationParameters.ValidAudiences: '[PII is hidden]'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateAudience(IEnumerable`1 audiences, SecurityToken securityToken, TokenValidationParameters validationParameters) in C:\agent2\_work\56\s\src\Microsoft.IdentityModel.Tokens\Validators.cs:line 108
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters) in C:\agent2\_work\56\s\src\System.IdentityModel.Tokens.Jwt\JwtSecurityTokenHandler.cs:line 737
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.<HandleAuthenticateAsync>d__6.MoveNext()
2018-11-12 16:51:52.275 +07:00 [Information] "BearerIdentityServerAuthenticationJwt" was not authenticated. Failure message: "IDX10214: Audience validation failed. Audiences: '[PII is hidden]'. Did not match: validationParameters.ValidAudience: '[PII is hidden]' or validationParameters.ValidAudiences: '[PII is hidden]'."
2018-11-12 16:51:52.275 +07:00 [Information] "Bearer" was not authenticated. Failure message: "IDX10214: Audience validation failed. Audiences: '[PII is hidden]'. Did not match: validationParameters.ValidAudience: '[PII is hidden]' or validationParameters.ValidAudiences: '[PII is hidden]'."
2018-11-12 16:51:52.275 +07:00 [Information] Authorization failed for user: null.
2018-11-12 16:51:52.275 +07:00 [Information] Authorization failed for the request at filter '"Microsoft.AspNetCore.Mvc.Authorization.AuthorizeFilter"'.
2018-11-12 16:51:52.275 +07:00 [Information] Executing ChallengeResult with authentication schemes (["Bearer"]).
2018-11-12 16:51:52.276 +07:00 [Information] AuthenticationScheme: "BearerIdentityServerAuthenticationJwt" was challenged.
2018-11-12 16:51:52.276 +07:00 [Information] AuthenticationScheme: "Bearer" was challenged.
2018-11-12 16:51:52.276 +07:00 [Information] Executed action "Application.IdentityServer.Controllers.ValuesController.Get (Application.IdentityServer)" in 41.9636ms
2018-11-12 16:51:52.276 +07:00 [Information] Request finished in 42.6781ms 401 
2018-11-12 16:52:57.231 +07:00 [Information] User profile is available. Using '"C:\Users\quyenth\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2018-11-12 16:52:57.605 +07:00 [Information] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-12 16:52:58.296 +07:00 [Information] Request starting HTTP/1.1 DEBUG http://localhost:57906/  0
2018-11-12 16:52:58.296 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/api/values  
2018-11-12 16:52:58.427 +07:00 [Information] Request finished in 138.1662ms 200 
2018-11-12 16:52:58.860 +07:00 [Information] Authorization failed for user: null.
2018-11-12 16:52:58.870 +07:00 [Information] Authorization failed for the request at filter '"Microsoft.AspNetCore.Mvc.Authorization.AuthorizeFilter"'.
2018-11-12 16:52:58.877 +07:00 [Information] Executing ChallengeResult with authentication schemes (["Bearer"]).
2018-11-12 16:52:58.961 +07:00 [Information] AuthenticationScheme: "BearerIdentityServerAuthenticationJwt" was challenged.
2018-11-12 16:52:58.963 +07:00 [Information] AuthenticationScheme: "Bearer" was challenged.
2018-11-12 16:52:58.967 +07:00 [Information] Executed action "Application.IdentityServer.Controllers.ValuesController.Get (Application.IdentityServer)" in 136.3022ms
2018-11-12 16:52:58.979 +07:00 [Information] Request finished in 691.1204ms 401 
2018-11-12 16:53:05.513 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/api/values  
2018-11-12 16:53:05.620 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/.well-known/openid-configuration  
2018-11-12 16:53:05.814 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryEndpoint" for "/.well-known/openid-configuration"
2018-11-12 16:53:06.164 +07:00 [Fatal] Unhandled exception: "Found identity scopes and API scopes that use the same names. This is an invalid configuration. Use different names for identity scopes and API scopes. Scopes found: openid"
System.Exception: Found identity scopes and API scopes that use the same names. This is an invalid configuration. Use different names for identity scopes and API scopes. Scopes found: openid
   at IdentityServer4.Stores.IResourceStoreExtensions.Validate(IEnumerable`1 identity, IEnumerable`1 apiResources) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Extensions\IResourceStoreExtensions.cs:line 58
   at IdentityServer4.Stores.IResourceStoreExtensions.<GetAllEnabledResourcesAsync>d__4.MoveNext() in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Extensions\IResourceStoreExtensions.cs:line 108
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at IdentityServer4.ResponseHandling.DiscoveryResponseGenerator.<CreateDiscoveryDocumentAsync>d__8.MoveNext() in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\ResponseHandling\DiscoveryResponseGenerator.cs:line 164
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at IdentityServer4.Endpoints.DiscoveryEndpoint.<ProcessAsync>d__4.MoveNext() in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Endpoints\DiscoveryEndpoint.cs:line 58
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at IdentityServer4.Hosting.IdentityServerMiddleware.<Invoke>d__3.MoveNext() in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 54
2018-11-12 16:53:06.406 +07:00 [Error] An unhandled exception has occurred while executing the request
System.Exception: Found identity scopes and API scopes that use the same names. This is an invalid configuration. Use different names for identity scopes and API scopes. Scopes found: openid
   at IdentityServer4.Stores.IResourceStoreExtensions.Validate(IEnumerable`1 identity, IEnumerable`1 apiResources) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Extensions\IResourceStoreExtensions.cs:line 58
   at IdentityServer4.Stores.IResourceStoreExtensions.<GetAllEnabledResourcesAsync>d__4.MoveNext() in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Extensions\IResourceStoreExtensions.cs:line 108
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at IdentityServer4.ResponseHandling.DiscoveryResponseGenerator.<CreateDiscoveryDocumentAsync>d__8.MoveNext() in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\ResponseHandling\DiscoveryResponseGenerator.cs:line 164
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at IdentityServer4.Endpoints.DiscoveryEndpoint.<ProcessAsync>d__4.MoveNext() in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Endpoints\DiscoveryEndpoint.cs:line 58
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at IdentityServer4.Hosting.IdentityServerMiddleware.<Invoke>d__3.MoveNext() in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 54
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at IdentityServer4.Hosting.IdentityServerMiddleware.<Invoke>d__3.MoveNext() in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 72
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.<Invoke>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at IdentityServer4.Hosting.BaseUrlMiddleware.<Invoke>d__3.MoveNext() in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 36
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.<Invoke>d__4.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.<Invoke>d__7.MoveNext()
2018-11-12 16:53:06.611 +07:00 [Information] Request finished in 990.9518ms 500 text/html; charset=utf-8
2018-11-12 16:53:06.840 +07:00 [Error] Exception occurred while processing message.
System.InvalidOperationException: IDX10803: Unable to obtain configuration from: 'http://localhost:57906/.well-known/openid-configuration'. ---> System.IO.IOException: IDX10804: Unable to retrieve document from: 'http://localhost:57906/.well-known/openid-configuration'. ---> System.Net.Http.HttpRequestException: Response status code does not indicate success: 500 (Internal Server Error).
   at System.Net.Http.HttpResponseMessage.EnsureSuccessStatusCode()
   at Microsoft.IdentityModel.Protocols.HttpDocumentRetriever.<GetDocumentAsync>d__8.MoveNext()
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.Protocols.HttpDocumentRetriever.<GetDocumentAsync>d__8.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at Microsoft.IdentityModel.Protocols.OpenIdConnect.OpenIdConnectConfigurationRetriever.<GetAsync>d__3.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at Microsoft.IdentityModel.Protocols.ConfigurationManager`1.<GetConfigurationAsync>d__24.MoveNext()
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.Protocols.ConfigurationManager`1.<GetConfigurationAsync>d__24.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.<HandleAuthenticateAsync>d__6.MoveNext()
2018-11-12 16:53:07.367 +07:00 [Information] Executed action "Application.IdentityServer.Controllers.ValuesController.Get (Application.IdentityServer)" in 1826.2551ms
2018-11-12 16:53:08.103 +07:00 [Error] An unhandled exception has occurred while executing the request
System.InvalidOperationException: IDX10803: Unable to obtain configuration from: 'http://localhost:57906/.well-known/openid-configuration'. ---> System.IO.IOException: IDX10804: Unable to retrieve document from: 'http://localhost:57906/.well-known/openid-configuration'. ---> System.Net.Http.HttpRequestException: Response status code does not indicate success: 500 (Internal Server Error).
   at System.Net.Http.HttpResponseMessage.EnsureSuccessStatusCode()
   at Microsoft.IdentityModel.Protocols.HttpDocumentRetriever.<GetDocumentAsync>d__8.MoveNext()
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.Protocols.HttpDocumentRetriever.<GetDocumentAsync>d__8.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at Microsoft.IdentityModel.Protocols.OpenIdConnect.OpenIdConnectConfigurationRetriever.<GetAsync>d__3.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.ConfiguredTaskAwaitable`1.ConfiguredTaskAwaiter.GetResult()
   at Microsoft.IdentityModel.Protocols.ConfigurationManager`1.<GetConfigurationAsync>d__24.MoveNext()
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.Protocols.ConfigurationManager`1.<GetConfigurationAsync>d__24.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.<HandleAuthenticateAsync>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.<HandleAuthenticateAsync>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.<AuthenticateAsync>d__47.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.AspNetCore.Authentication.AuthenticationService.<AuthenticateAsync>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at IdentityServer4.AccessTokenValidation.IdentityServerAuthenticationHandler.<HandleAuthenticateAsync>d__2.MoveNext() in C:\local\identity\server4\AccessTokenValidation\src\IdentityServer4.AccessTokenValidation\IdentityServerAuthenticationHandler.cs:line 61
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.<AuthenticateAsync>d__47.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.AspNetCore.Authentication.AuthenticationService.<AuthenticateAsync>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.AspNetCore.Authorization.Policy.PolicyEvaluator.<AuthenticateAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.AspNetCore.Mvc.Authorization.AuthorizeFilter.<OnAuthorizationAsync>d__15.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeFilterPipelineAsync>d__17.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeAsync>d__15.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Builder.RouterMiddleware.<Invoke>d__4.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at IdentityServer4.Hosting.IdentityServerMiddleware.<Invoke>d__3.MoveNext() in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 72
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.<Invoke>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at IdentityServer4.Hosting.BaseUrlMiddleware.<Invoke>d__3.MoveNext() in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 36
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.<Invoke>d__4.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.<Invoke>d__7.MoveNext()
2018-11-12 16:53:08.412 +07:00 [Information] Request finished in 2898.7663ms 500 text/html; charset=utf-8
2018-11-12 16:53:14.482 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/api/values  
2018-11-12 16:53:14.651 +07:00 [Error] Exception occurred while processing message.
System.InvalidOperationException: IDX10803: Unable to obtain configuration from: 'http://localhost:57906/.well-known/openid-configuration'.
   at Microsoft.IdentityModel.Protocols.ConfigurationManager`1.<GetConfigurationAsync>d__24.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.<HandleAuthenticateAsync>d__6.MoveNext()
2018-11-12 16:53:15.030 +07:00 [Information] Executed action "Application.IdentityServer.Controllers.ValuesController.Get (Application.IdentityServer)" in 505.6221ms
2018-11-12 16:53:15.246 +07:00 [Error] An unhandled exception has occurred while executing the request
System.InvalidOperationException: IDX10803: Unable to obtain configuration from: 'http://localhost:57906/.well-known/openid-configuration'.
   at Microsoft.IdentityModel.Protocols.ConfigurationManager`1.<GetConfigurationAsync>d__24.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.<HandleAuthenticateAsync>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.<HandleAuthenticateAsync>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.<AuthenticateAsync>d__47.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.AspNetCore.Authentication.AuthenticationService.<AuthenticateAsync>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at IdentityServer4.AccessTokenValidation.IdentityServerAuthenticationHandler.<HandleAuthenticateAsync>d__2.MoveNext() in C:\local\identity\server4\AccessTokenValidation\src\IdentityServer4.AccessTokenValidation\IdentityServerAuthenticationHandler.cs:line 61
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.<AuthenticateAsync>d__47.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.AspNetCore.Authentication.AuthenticationService.<AuthenticateAsync>d__10.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.AspNetCore.Authorization.Policy.PolicyEvaluator.<AuthenticateAsync>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at Microsoft.AspNetCore.Mvc.Authorization.AuthorizeFilter.<OnAuthorizationAsync>d__15.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeFilterPipelineAsync>d__17.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.<InvokeAsync>d__15.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Builder.RouterMiddleware.<Invoke>d__4.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at IdentityServer4.Hosting.IdentityServerMiddleware.<Invoke>d__3.MoveNext() in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 72
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.<Invoke>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at IdentityServer4.Hosting.BaseUrlMiddleware.<Invoke>d__3.MoveNext() in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 36
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.<Invoke>d__4.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.<Invoke>d__7.MoveNext()
2018-11-12 16:53:15.498 +07:00 [Information] Request finished in 1016.2802ms 500 text/html; charset=utf-8
2018-11-12 16:55:04.648 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/api/account/signin?username=quyenth@gmail.com&password=Admin@123&scope=openid  
2018-11-12 16:55:04.734 +07:00 [Information] Executing action method "Application.IdentityServer.Controllers.AccountController.Signin (Application.IdentityServer)" with arguments (["quyenth@gmail.com", "Admin@123", "ApiApplication", "secret", "openid"]) - ModelState is Valid
2018-11-12 16:55:07.264 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/.well-known/openid-configuration  
2018-11-12 16:55:07.278 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryEndpoint" for "/.well-known/openid-configuration"
2018-11-12 16:55:07.380 +07:00 [Fatal] Unhandled exception: "Found identity scopes and API scopes that use the same names. This is an invalid configuration. Use different names for identity scopes and API scopes. Scopes found: openid"
System.Exception: Found identity scopes and API scopes that use the same names. This is an invalid configuration. Use different names for identity scopes and API scopes. Scopes found: openid
   at IdentityServer4.Stores.IResourceStoreExtensions.Validate(IEnumerable`1 identity, IEnumerable`1 apiResources) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Extensions\IResourceStoreExtensions.cs:line 58
   at IdentityServer4.Stores.IResourceStoreExtensions.<GetAllEnabledResourcesAsync>d__4.MoveNext() in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Extensions\IResourceStoreExtensions.cs:line 108
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at IdentityServer4.ResponseHandling.DiscoveryResponseGenerator.<CreateDiscoveryDocumentAsync>d__8.MoveNext() in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\ResponseHandling\DiscoveryResponseGenerator.cs:line 164
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at IdentityServer4.Endpoints.DiscoveryEndpoint.<ProcessAsync>d__4.MoveNext() in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Endpoints\DiscoveryEndpoint.cs:line 58
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at IdentityServer4.Hosting.IdentityServerMiddleware.<Invoke>d__3.MoveNext() in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 54
2018-11-12 16:55:07.595 +07:00 [Error] An unhandled exception has occurred while executing the request
System.Exception: Found identity scopes and API scopes that use the same names. This is an invalid configuration. Use different names for identity scopes and API scopes. Scopes found: openid
   at IdentityServer4.Stores.IResourceStoreExtensions.Validate(IEnumerable`1 identity, IEnumerable`1 apiResources) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Extensions\IResourceStoreExtensions.cs:line 58
   at IdentityServer4.Stores.IResourceStoreExtensions.<GetAllEnabledResourcesAsync>d__4.MoveNext() in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Extensions\IResourceStoreExtensions.cs:line 108
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at IdentityServer4.ResponseHandling.DiscoveryResponseGenerator.<CreateDiscoveryDocumentAsync>d__8.MoveNext() in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\ResponseHandling\DiscoveryResponseGenerator.cs:line 164
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at IdentityServer4.Endpoints.DiscoveryEndpoint.<ProcessAsync>d__4.MoveNext() in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Endpoints\DiscoveryEndpoint.cs:line 58
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at IdentityServer4.Hosting.IdentityServerMiddleware.<Invoke>d__3.MoveNext() in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 54
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at IdentityServer4.Hosting.IdentityServerMiddleware.<Invoke>d__3.MoveNext() in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\IdentityServerMiddleware.cs:line 72
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.<Invoke>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at IdentityServer4.Hosting.BaseUrlMiddleware.<Invoke>d__3.MoveNext() in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\Hosting\BaseUrlMiddleware.cs:line 36
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.<Invoke>d__4.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.<Invoke>d__7.MoveNext()
2018-11-12 16:55:07.708 +07:00 [Information] Request finished in 443.7987ms 500 text/html; charset=utf-8
2018-11-12 16:55:07.773 +07:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2018-11-12 16:55:07.815 +07:00 [Information] Executed action "Application.IdentityServer.Controllers.AccountController.Signin (Application.IdentityServer)" in 3115.1405ms
2018-11-12 16:55:07.847 +07:00 [Information] Request finished in 3198.127ms 400 application/json; charset=utf-8
2018-11-12 16:55:15.302 +07:00 [Information] User profile is available. Using '"C:\Users\quyenth\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2018-11-12 16:55:15.404 +07:00 [Information] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-12 16:55:15.729 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/api/values  
2018-11-12 16:55:15.948 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/.well-known/openid-configuration  
2018-11-12 16:55:16.087 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryEndpoint" for "/.well-known/openid-configuration"
2018-11-12 16:55:16.169 +07:00 [Information] Request finished in 220.2486ms 200 application/json; charset=UTF-8
2018-11-12 16:55:16.209 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/.well-known/openid-configuration/jwks  
2018-11-12 16:55:16.210 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryKeyEndpoint" for "/.well-known/openid-configuration/jwks"
2018-11-12 16:55:16.230 +07:00 [Information] Request finished in 20.7146ms 200 application/json; charset=UTF-8
2018-11-12 16:55:16.292 +07:00 [Information] Failed to validate the token "eyJhbGciOiJSUzI1NiIsImtpZCI6Ijg5N2ExMWFmZmFiYzJhOWViN2M4MmI2ODVmZjhiZmRjIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1NDIwMTYyOTAsImV4cCI6MTU0MjAxOTg5MCwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1NzkwNiIsImF1ZCI6Imh0dHA6Ly9sb2NhbGhvc3Q6NTc5MDYvcmVzb3VyY2VzIiwiY2xpZW50X2lkIjoiQXBpQXBwbGljYXRpb24iLCJzdWIiOiI3YWRkMDYyNy05YjM2LTRhYjQtODNmOC02YzVmYzk4NmI4ODUiLCJhdXRoX3RpbWUiOjE1NDIwMTYyOTAsImlkcCI6ImxvY2FsIiwidXNlcm5hbWUiOiJxdXllbnRoQGdtYWlsLmNvbSIsImVtYWlsIjoicXV5ZW50aEBnbWFpbC5jb20iLCJmdWxsbmFtZSI6IlRoYWlzIGhvbmcgcXV5ZW4iLCJqdGkiOiI3NjlkMWNkODI3OTBmOWI4MjBlNWQ3NTA5NTlmNTgxNiIsInNjb3BlIjpbIm9wZW5pZCJdLCJhbXIiOlsicHdkIl19.pz6OzROfP5ogPlVjXxjWQzMMVXjW72101xuY4AXVOJQmxkO8d-9NgaFB3zfLPd85WmG25WsP8NHHYqlcbVREMRi2E22CGNli9SkftiMArP_o8EDo7l32n2ATya__WW9fyslEnp1MEm29bN7vuEPQ_bJTpbZeslGfoFp8npXC3el8W7Ykj0aredsZK1hLP2yRkr1ChQhekBhRKO5VbwXx06u84DAs9TKgdMQJX5g8JeP_He-VOz6W4dfA8frm3Rwft7drkU2ovx7useuus3RHIO4C7etGDgQKBNhj9t5-soEgfM9h0sIUdV1AG61jV79M6QxKPw999b5FREofGkbq1A".
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidAudienceException: IDX10214: Audience validation failed. Audiences: '[PII is hidden]'. Did not match: validationParameters.ValidAudience: '[PII is hidden]' or validationParameters.ValidAudiences: '[PII is hidden]'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateAudience(IEnumerable`1 audiences, SecurityToken securityToken, TokenValidationParameters validationParameters) in C:\agent2\_work\56\s\src\Microsoft.IdentityModel.Tokens\Validators.cs:line 108
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters) in C:\agent2\_work\56\s\src\System.IdentityModel.Tokens.Jwt\JwtSecurityTokenHandler.cs:line 737
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.<HandleAuthenticateAsync>d__6.MoveNext()
2018-11-12 16:55:16.324 +07:00 [Information] "BearerIdentityServerAuthenticationJwt" was not authenticated. Failure message: "IDX10214: Audience validation failed. Audiences: '[PII is hidden]'. Did not match: validationParameters.ValidAudience: '[PII is hidden]' or validationParameters.ValidAudiences: '[PII is hidden]'."
2018-11-12 16:55:16.324 +07:00 [Information] "Bearer" was not authenticated. Failure message: "IDX10214: Audience validation failed. Audiences: '[PII is hidden]'. Did not match: validationParameters.ValidAudience: '[PII is hidden]' or validationParameters.ValidAudiences: '[PII is hidden]'."
2018-11-12 16:55:16.328 +07:00 [Information] Authorization failed for user: null.
2018-11-12 16:55:16.330 +07:00 [Information] Authorization failed for the request at filter '"Microsoft.AspNetCore.Mvc.Authorization.AuthorizeFilter"'.
2018-11-12 16:55:16.334 +07:00 [Information] Executing ChallengeResult with authentication schemes (["Bearer"]).
2018-11-12 16:55:16.340 +07:00 [Information] AuthenticationScheme: "BearerIdentityServerAuthenticationJwt" was challenged.
2018-11-12 16:55:16.340 +07:00 [Information] AuthenticationScheme: "Bearer" was challenged.
2018-11-12 16:55:16.342 +07:00 [Information] Executed action "Application.IdentityServer.Controllers.ValuesController.Get (Application.IdentityServer)" in 465.2903ms
2018-11-12 16:55:16.343 +07:00 [Information] Request finished in 619.6099ms 401 
2018-11-12 16:55:24.055 +07:00 [Information] User profile is available. Using '"C:\Users\quyenth\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2018-11-12 16:55:24.185 +07:00 [Information] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-12 16:55:24.638 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/api/values  
2018-11-12 16:55:24.798 +07:00 [Information] Authorization failed for user: null.
2018-11-12 16:55:24.801 +07:00 [Information] Authorization failed for the request at filter '"Microsoft.AspNetCore.Mvc.Authorization.AuthorizeFilter"'.
2018-11-12 16:55:24.805 +07:00 [Information] Executing ChallengeResult with authentication schemes (["Bearer"]).
2018-11-12 16:55:24.837 +07:00 [Information] AuthenticationScheme: "BearerIdentityServerAuthenticationJwt" was challenged.
2018-11-12 16:55:24.837 +07:00 [Information] AuthenticationScheme: "Bearer" was challenged.
2018-11-12 16:55:24.839 +07:00 [Information] Executed action "Application.IdentityServer.Controllers.ValuesController.Get (Application.IdentityServer)" in 52.3774ms
2018-11-12 16:55:24.845 +07:00 [Information] Request finished in 211.877ms 401 
2018-11-12 16:55:30.402 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/api/values  
2018-11-12 16:55:30.446 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/.well-known/openid-configuration  
2018-11-12 16:55:30.590 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryEndpoint" for "/.well-known/openid-configuration"
2018-11-12 16:55:30.679 +07:00 [Information] Request finished in 232.8183ms 200 application/json; charset=UTF-8
2018-11-12 16:55:30.722 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/.well-known/openid-configuration/jwks  
2018-11-12 16:55:30.723 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryKeyEndpoint" for "/.well-known/openid-configuration/jwks"
2018-11-12 16:55:30.743 +07:00 [Information] Request finished in 21.2814ms 200 application/json; charset=UTF-8
2018-11-12 16:55:30.805 +07:00 [Information] Failed to validate the token "eyJhbGciOiJSUzI1NiIsImtpZCI6Ijg5N2ExMWFmZmFiYzJhOWViN2M4MmI2ODVmZjhiZmRjIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1NDIwMTYyOTAsImV4cCI6MTU0MjAxOTg5MCwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1NzkwNiIsImF1ZCI6Imh0dHA6Ly9sb2NhbGhvc3Q6NTc5MDYvcmVzb3VyY2VzIiwiY2xpZW50X2lkIjoiQXBpQXBwbGljYXRpb24iLCJzdWIiOiI3YWRkMDYyNy05YjM2LTRhYjQtODNmOC02YzVmYzk4NmI4ODUiLCJhdXRoX3RpbWUiOjE1NDIwMTYyOTAsImlkcCI6ImxvY2FsIiwidXNlcm5hbWUiOiJxdXllbnRoQGdtYWlsLmNvbSIsImVtYWlsIjoicXV5ZW50aEBnbWFpbC5jb20iLCJmdWxsbmFtZSI6IlRoYWlzIGhvbmcgcXV5ZW4iLCJqdGkiOiI3NjlkMWNkODI3OTBmOWI4MjBlNWQ3NTA5NTlmNTgxNiIsInNjb3BlIjpbIm9wZW5pZCJdLCJhbXIiOlsicHdkIl19.pz6OzROfP5ogPlVjXxjWQzMMVXjW72101xuY4AXVOJQmxkO8d-9NgaFB3zfLPd85WmG25WsP8NHHYqlcbVREMRi2E22CGNli9SkftiMArP_o8EDo7l32n2ATya__WW9fyslEnp1MEm29bN7vuEPQ_bJTpbZeslGfoFp8npXC3el8W7Ykj0aredsZK1hLP2yRkr1ChQhekBhRKO5VbwXx06u84DAs9TKgdMQJX5g8JeP_He-VOz6W4dfA8frm3Rwft7drkU2ovx7useuus3RHIO4C7etGDgQKBNhj9t5-soEgfM9h0sIUdV1AG61jV79M6QxKPw999b5FREofGkbq1A".
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidAudienceException: IDX10214: Audience validation failed. Audiences: '[PII is hidden]'. Did not match: validationParameters.ValidAudience: '[PII is hidden]' or validationParameters.ValidAudiences: '[PII is hidden]'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateAudience(IEnumerable`1 audiences, SecurityToken securityToken, TokenValidationParameters validationParameters) in C:\agent2\_work\56\s\src\Microsoft.IdentityModel.Tokens\Validators.cs:line 108
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters) in C:\agent2\_work\56\s\src\System.IdentityModel.Tokens.Jwt\JwtSecurityTokenHandler.cs:line 737
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.<HandleAuthenticateAsync>d__6.MoveNext()
2018-11-12 16:55:30.838 +07:00 [Information] "BearerIdentityServerAuthenticationJwt" was not authenticated. Failure message: "IDX10214: Audience validation failed. Audiences: '[PII is hidden]'. Did not match: validationParameters.ValidAudience: '[PII is hidden]' or validationParameters.ValidAudiences: '[PII is hidden]'."
2018-11-12 16:55:30.838 +07:00 [Information] "Bearer" was not authenticated. Failure message: "IDX10214: Audience validation failed. Audiences: '[PII is hidden]'. Did not match: validationParameters.ValidAudience: '[PII is hidden]' or validationParameters.ValidAudiences: '[PII is hidden]'."
2018-11-12 16:55:30.838 +07:00 [Information] Authorization failed for user: null.
2018-11-12 16:55:30.838 +07:00 [Information] Authorization failed for the request at filter '"Microsoft.AspNetCore.Mvc.Authorization.AuthorizeFilter"'.
2018-11-12 16:55:30.838 +07:00 [Information] Executing ChallengeResult with authentication schemes (["Bearer"]).
2018-11-12 16:55:30.839 +07:00 [Information] AuthenticationScheme: "BearerIdentityServerAuthenticationJwt" was challenged.
2018-11-12 16:55:30.839 +07:00 [Information] AuthenticationScheme: "Bearer" was challenged.
2018-11-12 16:55:30.839 +07:00 [Information] Executed action "Application.IdentityServer.Controllers.ValuesController.Get (Application.IdentityServer)" in 432.4159ms
2018-11-12 16:55:30.839 +07:00 [Information] Request finished in 436.5113ms 401 
2018-11-12 16:57:26.057 +07:00 [Information] User profile is available. Using '"C:\Users\quyenth\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2018-11-12 16:57:26.259 +07:00 [Information] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-12 16:57:26.541 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/api/values  
2018-11-12 16:57:26.887 +07:00 [Information] Authorization failed for user: null.
2018-11-12 16:57:26.892 +07:00 [Information] Authorization failed for the request at filter '"Microsoft.AspNetCore.Mvc.Authorization.AuthorizeFilter"'.
2018-11-12 16:57:26.905 +07:00 [Information] Executing ChallengeResult with authentication schemes (["Bearer"]).
2018-11-12 16:57:26.969 +07:00 [Information] AuthenticationScheme: "BearerIdentityServerAuthenticationJwt" was challenged.
2018-11-12 16:57:26.969 +07:00 [Information] AuthenticationScheme: "Bearer" was challenged.
2018-11-12 16:57:26.973 +07:00 [Information] Executed action "Application.IdentityServer.Controllers.ValuesController.Get (Application.IdentityServer)" in 114.1438ms
2018-11-12 16:57:26.984 +07:00 [Information] Request finished in 452.4101ms 401 
2018-11-12 16:57:37.398 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/api/account/signin?username=quyenth@gmail.com&password=Admin@123&scope=openid  
2018-11-12 16:57:37.587 +07:00 [Information] Executing action method "Application.IdentityServer.Controllers.AccountController.Signin (Application.IdentityServer)" with arguments (["quyenth@gmail.com", "Admin@123", "ApiApplication", "secret", "openid"]) - ModelState is Valid
2018-11-12 16:57:37.632 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/.well-known/openid-configuration  
2018-11-12 16:57:37.636 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryEndpoint" for "/.well-known/openid-configuration"
2018-11-12 16:57:37.713 +07:00 [Information] Request finished in 80.9816ms 200 application/json; charset=UTF-8
2018-11-12 16:57:37.733 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/.well-known/openid-configuration/jwks  
2018-11-12 16:57:37.734 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryKeyEndpoint" for "/.well-known/openid-configuration/jwks"
2018-11-12 16:57:37.765 +07:00 [Information] Request finished in 32.4473ms 200 application/json; charset=UTF-8
2018-11-12 16:57:37.800 +07:00 [Information] Request starting HTTP/1.1 POST http://localhost:57906/connect/token application/x-www-form-urlencoded 89
2018-11-12 16:57:37.805 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.TokenEndpoint" for "/connect/token"
2018-11-12 16:57:37.875 +07:00 [Error] Requested scope not allowed: "api2,openid"
2018-11-12 16:57:37.882 +07:00 [Error] "{
  \"ClientId\": \"ApiApplication\",
  \"GrantType\": \"password\",
  \"Raw\": {
    \"grant_type\": \"password\",
    \"username\": \"quyenth@gmail.com\",
    \"password\": \"***REDACTED***\",
    \"scope\": \"api2,openid\"
  }
}"
2018-11-12 16:57:37.887 +07:00 [Information] Request finished in 87.2649ms 400 application/json; charset=UTF-8
2018-11-12 16:57:37.893 +07:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2018-11-12 16:57:37.896 +07:00 [Information] Executed action "Application.IdentityServer.Controllers.AccountController.Signin (Application.IdentityServer)" in 470.9855ms
2018-11-12 16:57:37.896 +07:00 [Information] Request finished in 497.947ms 400 application/json; charset=utf-8
2018-11-12 16:59:20.773 +07:00 [Information] User profile is available. Using '"C:\Users\quyenth\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2018-11-12 16:59:20.881 +07:00 [Information] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-12 16:59:21.234 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/api/account/signin?username=quyenth@gmail.com&password=Admin@123&scope=openid  
2018-11-12 16:59:21.547 +07:00 [Information] Executing action method "Application.IdentityServer.Controllers.AccountController.Signin (Application.IdentityServer)" with arguments (["quyenth@gmail.com", "Admin@123", "ApiApplication", "secret", "openid"]) - ModelState is Valid
2018-11-12 16:59:21.618 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/.well-known/openid-configuration  
2018-11-12 16:59:21.625 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryEndpoint" for "/.well-known/openid-configuration"
2018-11-12 16:59:21.706 +07:00 [Information] Request finished in 87.2564ms 200 application/json; charset=UTF-8
2018-11-12 16:59:21.730 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/.well-known/openid-configuration/jwks  
2018-11-12 16:59:21.731 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryKeyEndpoint" for "/.well-known/openid-configuration/jwks"
2018-11-12 16:59:21.765 +07:00 [Information] Request finished in 35.2652ms 200 application/json; charset=UTF-8
2018-11-12 16:59:21.796 +07:00 [Information] Request starting HTTP/1.1 POST http://localhost:57906/connect/token application/x-www-form-urlencoded 82
2018-11-12 16:59:21.803 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.TokenEndpoint" for "/connect/token"
2018-11-12 16:59:22.535 +07:00 [Information] Entity Framework Core "2.1.4-rtm-31024" initialized '"ApplicationIdentityContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=AspNetCore "
2018-11-12 16:59:22.613 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/api/account/signin?username=quyenth@gmail.com&password=Admin@123&scope=openid  
2018-11-12 16:59:22.615 +07:00 [Information] Executing action method "Application.IdentityServer.Controllers.AccountController.Signin (Application.IdentityServer)" with arguments (["quyenth@gmail.com", "Admin@123", "ApiApplication", "secret", "openid"]) - ModelState is Valid
2018-11-12 16:59:22.632 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/.well-known/openid-configuration  
2018-11-12 16:59:22.633 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryEndpoint" for "/.well-known/openid-configuration"
2018-11-12 16:59:22.634 +07:00 [Information] Request finished in 1.9657ms 200 application/json; charset=UTF-8
2018-11-12 16:59:22.643 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/.well-known/openid-configuration/jwks  
2018-11-12 16:59:22.644 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryKeyEndpoint" for "/.well-known/openid-configuration/jwks"
2018-11-12 16:59:22.645 +07:00 [Information] Request finished in 1.2347ms 200 application/json; charset=UTF-8
2018-11-12 16:59:22.669 +07:00 [Information] Request starting HTTP/1.1 POST http://localhost:57906/connect/token application/x-www-form-urlencoded 82
2018-11-12 16:59:22.670 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.TokenEndpoint" for "/connect/token"
2018-11-12 16:59:22.673 +07:00 [Information] Entity Framework Core "2.1.4-rtm-31024" initialized '"ApplicationIdentityContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=AspNetCore "
2018-11-12 16:59:25.561 +07:00 [Information] Executed DbCommand ("190"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [AspNetUsers] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0"
2018-11-12 16:59:25.561 +07:00 [Information] Executed DbCommand ("190"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [AspNetUsers] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0"
2018-11-12 16:59:25.743 +07:00 [Information] Credentials validated for username: "quyenth@gmail.com"
2018-11-12 16:59:25.757 +07:00 [Information] Credentials validated for username: "quyenth@gmail.com"
2018-11-12 16:59:25.762 +07:00 [Information] Token request validation success
"{
  \"ClientId\": \"ApiApplication\",
  \"GrantType\": \"password\",
  \"Scopes\": \"openid\",
  \"UserName\": \"quyenth@gmail.com\",
  \"Raw\": {
    \"grant_type\": \"password\",
    \"username\": \"quyenth@gmail.com\",
    \"password\": \"***REDACTED***\",
    \"scope\": \"openid\"
  }
}"
2018-11-12 16:59:25.763 +07:00 [Information] Token request validation success
"{
  \"ClientId\": \"ApiApplication\",
  \"GrantType\": \"password\",
  \"Scopes\": \"openid\",
  \"UserName\": \"quyenth@gmail.com\",
  \"Raw\": {
    \"grant_type\": \"password\",
    \"username\": \"quyenth@gmail.com\",
    \"password\": \"***REDACTED***\",
    \"scope\": \"openid\"
  }
}"
2018-11-12 16:59:26.030 +07:00 [Information] Executed DbCommand ("13"ms) [Parameters=["@__user_Id_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0"
2018-11-12 16:59:26.034 +07:00 [Information] Executed DbCommand ("16"ms) [Parameters=["@__user_Id_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0"
2018-11-12 16:59:26.157 +07:00 [Information] Executed DbCommand ("28"ms) [Parameters=["@__userId_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0"
2018-11-12 16:59:26.157 +07:00 [Information] Executed DbCommand ("28"ms) [Parameters=["@__userId_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0"
2018-11-12 16:59:26.165 +07:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0"
2018-11-12 16:59:26.165 +07:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0"
2018-11-12 16:59:26.166 +07:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__user_Id_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0"
2018-11-12 16:59:26.166 +07:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__user_Id_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0"
2018-11-12 16:59:26.281 +07:00 [Information] Request finished in 4485.5318ms 200 application/json; charset=UTF-8
2018-11-12 16:59:26.282 +07:00 [Information] Request finished in 3613.1222ms 200 application/json; charset=UTF-8
2018-11-12 16:59:26.290 +07:00 [Information] Entity Framework Core "2.1.4-rtm-31024" initialized '"ApplicationIdentityContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=AspNetCore "
2018-11-12 16:59:26.290 +07:00 [Information] Entity Framework Core "2.1.4-rtm-31024" initialized '"ApplicationIdentityContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=AspNetCore "
2018-11-12 16:59:26.292 +07:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [AspNetUsers] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0"
2018-11-12 16:59:26.301 +07:00 [Information] Executed DbCommand ("10"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [AspNetUsers] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0"
2018-11-12 16:59:26.304 +07:00 [Information] Executed DbCommand ("4"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [AspNetUsers] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0"
2018-11-12 16:59:26.308 +07:00 [Information] Executed DbCommand ("6"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [AspNetUsers] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0"
2018-11-12 16:59:26.349 +07:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2018-11-12 16:59:26.349 +07:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2018-11-12 16:59:26.391 +07:00 [Information] Executed action "Application.IdentityServer.Controllers.AccountController.Signin (Application.IdentityServer)" in 3767.4592ms
2018-11-12 16:59:26.391 +07:00 [Information] Executed action "Application.IdentityServer.Controllers.AccountController.Signin (Application.IdentityServer)" in 4988.2576ms
2018-11-12 16:59:26.392 +07:00 [Information] Request finished in 5163.4744ms 200 application/json; charset=utf-8
2018-11-12 16:59:26.392 +07:00 [Information] Request finished in 3779.402ms 200 application/json; charset=utf-8
2018-11-12 16:59:45.495 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/api/values  
2018-11-12 16:59:45.528 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/.well-known/openid-configuration  
2018-11-12 16:59:45.529 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryEndpoint" for "/.well-known/openid-configuration"
2018-11-12 16:59:45.529 +07:00 [Information] Request finished in 0.8766ms 200 application/json; charset=UTF-8
2018-11-12 16:59:45.550 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/.well-known/openid-configuration/jwks  
2018-11-12 16:59:45.550 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryKeyEndpoint" for "/.well-known/openid-configuration/jwks"
2018-11-12 16:59:45.551 +07:00 [Information] Request finished in 0.9448ms 200 application/json; charset=UTF-8
2018-11-12 16:59:45.592 +07:00 [Information] Failed to validate the token "eyJhbGciOiJSUzI1NiIsImtpZCI6Ijg5N2ExMWFmZmFiYzJhOWViN2M4MmI2ODVmZjhiZmRjIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1NDIwMTY3NjYsImV4cCI6MTU0MjAyMDM2NiwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1NzkwNiIsImF1ZCI6Imh0dHA6Ly9sb2NhbGhvc3Q6NTc5MDYvcmVzb3VyY2VzIiwiY2xpZW50X2lkIjoiQXBpQXBwbGljYXRpb24iLCJzdWIiOiI3YWRkMDYyNy05YjM2LTRhYjQtODNmOC02YzVmYzk4NmI4ODUiLCJhdXRoX3RpbWUiOjE1NDIwMTY3NjUsImlkcCI6ImxvY2FsIiwidXNlcm5hbWUiOiJxdXllbnRoQGdtYWlsLmNvbSIsImVtYWlsIjoicXV5ZW50aEBnbWFpbC5jb20iLCJmdWxsbmFtZSI6IlRoYWlzIGhvbmcgcXV5ZW4iLCJqdGkiOiIyMjFlOWM1MjU0YmE4ZmUzZTg2NjA0MTUwNTRiZDMxMCIsInNjb3BlIjpbIm9wZW5pZCJdLCJhbXIiOlsicHdkIl19.PgchZgTl-rEL1FyUNhm_y1X1naQzzYsv4FA02QWifSOFo8o_GMrEYMDXHIOjuIJfsyuAJ2drdyGNtipZJf6tGxgZR5zLKbGjrEp7hweaw7JFj0pUVdgiI2cX-JP6XhnQT9NEIeeLQ8ll-DgvJheOtQBPd926xeGzIxTVTTeZuRolwxw74Qt5-RYDgVMFpkZBQi4iP69E3XglDBR3J6CwAc4lsH2b-xGZDpR7bHiTrcn5V3EQ5Onwvv0GjyKweft5IdnK0_rm0dariz0IDNVSSGpC3IMSnY8aZGl7r12RytbpmkYeawABGl003SZ_roa1Vs0H2ai_27rHZiVUWb3m1g".
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidAudienceException: IDX10214: Audience validation failed. Audiences: '[PII is hidden]'. Did not match: validationParameters.ValidAudience: '[PII is hidden]' or validationParameters.ValidAudiences: '[PII is hidden]'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateAudience(IEnumerable`1 audiences, SecurityToken securityToken, TokenValidationParameters validationParameters) in C:\agent2\_work\56\s\src\Microsoft.IdentityModel.Tokens\Validators.cs:line 108
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters) in C:\agent2\_work\56\s\src\System.IdentityModel.Tokens.Jwt\JwtSecurityTokenHandler.cs:line 737
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.<HandleAuthenticateAsync>d__6.MoveNext()
2018-11-12 16:59:45.627 +07:00 [Information] "BearerIdentityServerAuthenticationJwt" was not authenticated. Failure message: "IDX10214: Audience validation failed. Audiences: '[PII is hidden]'. Did not match: validationParameters.ValidAudience: '[PII is hidden]' or validationParameters.ValidAudiences: '[PII is hidden]'."
2018-11-12 16:59:45.627 +07:00 [Information] "Bearer" was not authenticated. Failure message: "IDX10214: Audience validation failed. Audiences: '[PII is hidden]'. Did not match: validationParameters.ValidAudience: '[PII is hidden]' or validationParameters.ValidAudiences: '[PII is hidden]'."
2018-11-12 16:59:45.631 +07:00 [Information] Authorization failed for user: null.
2018-11-12 16:59:45.631 +07:00 [Information] Authorization failed for the request at filter '"Microsoft.AspNetCore.Mvc.Authorization.AuthorizeFilter"'.
2018-11-12 16:59:45.632 +07:00 [Information] Executing ChallengeResult with authentication schemes (["Bearer"]).
2018-11-12 16:59:45.637 +07:00 [Information] AuthenticationScheme: "BearerIdentityServerAuthenticationJwt" was challenged.
2018-11-12 16:59:45.637 +07:00 [Information] AuthenticationScheme: "Bearer" was challenged.
2018-11-12 16:59:45.637 +07:00 [Information] Executed action "Application.IdentityServer.Controllers.ValuesController.Get (Application.IdentityServer)" in 135.346ms
2018-11-12 16:59:45.638 +07:00 [Information] Request finished in 143.3501ms 401 
2018-11-12 17:00:03.574 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/connect/userinfo  
2018-11-12 17:00:03.576 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.UserInfoEndpoint" for "/connect/userinfo"
2018-11-12 17:00:03.616 +07:00 [Information] Entity Framework Core "2.1.4-rtm-31024" initialized '"ApplicationIdentityContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=AspNetCore "
2018-11-12 17:00:03.628 +07:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__get_Item_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[FullName], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[SecurityStamp], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0"
2018-11-12 17:00:03.654 +07:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__user_Id_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0"
2018-11-12 17:00:03.655 +07:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__userId_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0"
2018-11-12 17:00:03.656 +07:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__userId_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0"
2018-11-12 17:00:03.657 +07:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__user_Id_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0"
2018-11-12 17:00:03.657 +07:00 [Information] Profile service returned to the following claim types: "username email fullname"
2018-11-12 17:00:03.659 +07:00 [Information] Request finished in 84.8556ms 200 application/json; charset=UTF-8
2018-11-12 17:00:52.742 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/api/values  
2018-11-12 17:00:52.744 +07:00 [Information] Failed to validate the token "eyJhbGciOiJSUzI1NiIsImtpZCI6Ijg5N2ExMWFmZmFiYzJhOWViN2M4MmI2ODVmZjhiZmRjIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1NDIwMTY3NjYsImV4cCI6MTU0MjAyMDM2NiwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1NzkwNiIsImF1ZCI6Imh0dHA6Ly9sb2NhbGhvc3Q6NTc5MDYvcmVzb3VyY2VzIiwiY2xpZW50X2lkIjoiQXBpQXBwbGljYXRpb24iLCJzdWIiOiI3YWRkMDYyNy05YjM2LTRhYjQtODNmOC02YzVmYzk4NmI4ODUiLCJhdXRoX3RpbWUiOjE1NDIwMTY3NjUsImlkcCI6ImxvY2FsIiwidXNlcm5hbWUiOiJxdXllbnRoQGdtYWlsLmNvbSIsImVtYWlsIjoicXV5ZW50aEBnbWFpbC5jb20iLCJmdWxsbmFtZSI6IlRoYWlzIGhvbmcgcXV5ZW4iLCJqdGkiOiIyMjFlOWM1MjU0YmE4ZmUzZTg2NjA0MTUwNTRiZDMxMCIsInNjb3BlIjpbIm9wZW5pZCJdLCJhbXIiOlsicHdkIl19.PgchZgTl-rEL1FyUNhm_y1X1naQzzYsv4FA02QWifSOFo8o_GMrEYMDXHIOjuIJfsyuAJ2drdyGNtipZJf6tGxgZR5zLKbGjrEp7hweaw7JFj0pUVdgiI2cX-JP6XhnQT9NEIeeLQ8ll-DgvJheOtQBPd926xeGzIxTVTTeZuRolwxw74Qt5-RYDgVMFpkZBQi4iP69E3XglDBR3J6CwAc4lsH2b-xGZDpR7bHiTrcn5V3EQ5Onwvv0GjyKweft5IdnK0_rm0dariz0IDNVSSGpC3IMSnY8aZGl7r12RytbpmkYeawABGl003SZ_roa1Vs0H2ai_27rHZiVUWb3m1g".
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidAudienceException: IDX10214: Audience validation failed. Audiences: '[PII is hidden]'. Did not match: validationParameters.ValidAudience: '[PII is hidden]' or validationParameters.ValidAudiences: '[PII is hidden]'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateAudience(IEnumerable`1 audiences, SecurityToken securityToken, TokenValidationParameters validationParameters) in C:\agent2\_work\56\s\src\Microsoft.IdentityModel.Tokens\Validators.cs:line 108
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters) in C:\agent2\_work\56\s\src\System.IdentityModel.Tokens.Jwt\JwtSecurityTokenHandler.cs:line 737
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.<HandleAuthenticateAsync>d__6.MoveNext()
2018-11-12 17:00:52.750 +07:00 [Information] "BearerIdentityServerAuthenticationJwt" was not authenticated. Failure message: "IDX10214: Audience validation failed. Audiences: '[PII is hidden]'. Did not match: validationParameters.ValidAudience: '[PII is hidden]' or validationParameters.ValidAudiences: '[PII is hidden]'."
2018-11-12 17:00:52.750 +07:00 [Information] "Bearer" was not authenticated. Failure message: "IDX10214: Audience validation failed. Audiences: '[PII is hidden]'. Did not match: validationParameters.ValidAudience: '[PII is hidden]' or validationParameters.ValidAudiences: '[PII is hidden]'."
2018-11-12 17:00:52.750 +07:00 [Information] Authorization failed for user: null.
2018-11-12 17:00:52.750 +07:00 [Information] Authorization failed for the request at filter '"Microsoft.AspNetCore.Mvc.Authorization.AuthorizeFilter"'.
2018-11-12 17:00:52.750 +07:00 [Information] Executing ChallengeResult with authentication schemes (["Bearer"]).
2018-11-12 17:00:52.750 +07:00 [Information] AuthenticationScheme: "BearerIdentityServerAuthenticationJwt" was challenged.
2018-11-12 17:00:52.750 +07:00 [Information] AuthenticationScheme: "Bearer" was challenged.
2018-11-12 17:00:52.751 +07:00 [Information] Executed action "Application.IdentityServer.Controllers.ValuesController.Get (Application.IdentityServer)" in 7.6788ms
2018-11-12 17:00:52.751 +07:00 [Information] Request finished in 8.5489ms 401 
2018-11-12 17:01:37.417 +07:00 [Information] User profile is available. Using '"C:\Users\quyenth\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2018-11-12 17:01:37.525 +07:00 [Information] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-12 17:01:37.780 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/api/account/signin?username=quyenth@gmail.com&password=Admin@123&scope=openid  
2018-11-12 17:01:38.099 +07:00 [Information] Executing action method "Application.IdentityServer.Controllers.AccountController.Signin (Application.IdentityServer)" with arguments (["quyenth@gmail.com", "Admin@123", "ApiApplication", "secret", "openid"]) - ModelState is Valid
2018-11-12 17:01:38.154 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/.well-known/openid-configuration  
2018-11-12 17:01:38.160 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryEndpoint" for "/.well-known/openid-configuration"
2018-11-12 17:01:38.239 +07:00 [Information] Request finished in 83.9082ms 200 application/json; charset=UTF-8
2018-11-12 17:01:38.262 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/.well-known/openid-configuration/jwks  
2018-11-12 17:01:38.264 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryKeyEndpoint" for "/.well-known/openid-configuration/jwks"
2018-11-12 17:01:38.292 +07:00 [Information] Request finished in 29.8985ms 200 application/json; charset=UTF-8
2018-11-12 17:01:38.318 +07:00 [Information] Request starting HTTP/1.1 POST http://localhost:57906/connect/token application/x-www-form-urlencoded 82
2018-11-12 17:01:38.323 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.TokenEndpoint" for "/connect/token"
2018-11-12 17:01:39.121 +07:00 [Information] Entity Framework Core "2.1.4-rtm-31024" initialized '"ApplicationIdentityContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=AspNetCore "
2018-11-12 17:01:39.956 +07:00 [Information] Executed DbCommand ("125"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [AspNetUsers] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0"
2018-11-12 17:01:40.114 +07:00 [Information] Credentials validated for username: "quyenth@gmail.com"
2018-11-12 17:01:40.143 +07:00 [Information] Token request validation success
"{
  \"ClientId\": \"ApiApplication\",
  \"GrantType\": \"password\",
  \"Scopes\": \"openid\",
  \"UserName\": \"quyenth@gmail.com\",
  \"Raw\": {
    \"grant_type\": \"password\",
    \"username\": \"quyenth@gmail.com\",
    \"password\": \"***REDACTED***\",
    \"scope\": \"openid\"
  }
}"
2018-11-12 17:01:40.256 +07:00 [Information] Executed DbCommand ("4"ms) [Parameters=["@__user_Id_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0"
2018-11-12 17:01:40.306 +07:00 [Information] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0"
2018-11-12 17:01:40.315 +07:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__userId_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0"
2018-11-12 17:01:40.316 +07:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__user_Id_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0"
2018-11-12 17:01:40.381 +07:00 [Information] Request finished in 2063.1296ms 200 application/json; charset=UTF-8
2018-11-12 17:01:40.386 +07:00 [Information] Entity Framework Core "2.1.4-rtm-31024" initialized '"ApplicationIdentityContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=AspNetCore "
2018-11-12 17:01:40.393 +07:00 [Information] Executed DbCommand ("5"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [AspNetUsers] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0"
2018-11-12 17:01:40.401 +07:00 [Information] Executed DbCommand ("2"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [AspNetUsers] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0"
2018-11-12 17:01:40.424 +07:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2018-11-12 17:01:40.443 +07:00 [Information] Executed action "Application.IdentityServer.Controllers.AccountController.Signin (Application.IdentityServer)" in 2495.7973ms
2018-11-12 17:01:40.444 +07:00 [Information] Request finished in 2669.2721ms 200 application/json; charset=utf-8
2018-11-12 17:01:41.908 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/api/values  
2018-11-12 17:01:41.949 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/.well-known/openid-configuration  
2018-11-12 17:01:41.950 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryEndpoint" for "/.well-known/openid-configuration"
2018-11-12 17:01:41.951 +07:00 [Information] Request finished in 1.7219ms 200 application/json; charset=UTF-8
2018-11-12 17:01:41.979 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/.well-known/openid-configuration/jwks  
2018-11-12 17:01:41.980 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryKeyEndpoint" for "/.well-known/openid-configuration/jwks"
2018-11-12 17:01:41.980 +07:00 [Information] Request finished in 1.0138ms 200 application/json; charset=UTF-8
2018-11-12 17:01:42.029 +07:00 [Information] Failed to validate the token "eyJhbGciOiJSUzI1NiIsImtpZCI6Ijg5N2ExMWFmZmFiYzJhOWViN2M4MmI2ODVmZjhiZmRjIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1NDIwMTY3NjYsImV4cCI6MTU0MjAyMDM2NiwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1NzkwNiIsImF1ZCI6Imh0dHA6Ly9sb2NhbGhvc3Q6NTc5MDYvcmVzb3VyY2VzIiwiY2xpZW50X2lkIjoiQXBpQXBwbGljYXRpb24iLCJzdWIiOiI3YWRkMDYyNy05YjM2LTRhYjQtODNmOC02YzVmYzk4NmI4ODUiLCJhdXRoX3RpbWUiOjE1NDIwMTY3NjUsImlkcCI6ImxvY2FsIiwidXNlcm5hbWUiOiJxdXllbnRoQGdtYWlsLmNvbSIsImVtYWlsIjoicXV5ZW50aEBnbWFpbC5jb20iLCJmdWxsbmFtZSI6IlRoYWlzIGhvbmcgcXV5ZW4iLCJqdGkiOiIyMjFlOWM1MjU0YmE4ZmUzZTg2NjA0MTUwNTRiZDMxMCIsInNjb3BlIjpbIm9wZW5pZCJdLCJhbXIiOlsicHdkIl19.PgchZgTl-rEL1FyUNhm_y1X1naQzzYsv4FA02QWifSOFo8o_GMrEYMDXHIOjuIJfsyuAJ2drdyGNtipZJf6tGxgZR5zLKbGjrEp7hweaw7JFj0pUVdgiI2cX-JP6XhnQT9NEIeeLQ8ll-DgvJheOtQBPd926xeGzIxTVTTeZuRolwxw74Qt5-RYDgVMFpkZBQi4iP69E3XglDBR3J6CwAc4lsH2b-xGZDpR7bHiTrcn5V3EQ5Onwvv0GjyKweft5IdnK0_rm0dariz0IDNVSSGpC3IMSnY8aZGl7r12RytbpmkYeawABGl003SZ_roa1Vs0H2ai_27rHZiVUWb3m1g".
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidAudienceException: IDX10214: Audience validation failed. Audiences: '[PII is hidden]'. Did not match: validationParameters.ValidAudience: '[PII is hidden]' or validationParameters.ValidAudiences: '[PII is hidden]'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateAudience(IEnumerable`1 audiences, SecurityToken securityToken, TokenValidationParameters validationParameters) in C:\agent2\_work\56\s\src\Microsoft.IdentityModel.Tokens\Validators.cs:line 108
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters) in C:\agent2\_work\56\s\src\System.IdentityModel.Tokens.Jwt\JwtSecurityTokenHandler.cs:line 737
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.<HandleAuthenticateAsync>d__6.MoveNext()
2018-11-12 17:01:42.061 +07:00 [Information] "BearerIdentityServerAuthenticationJwt" was not authenticated. Failure message: "IDX10214: Audience validation failed. Audiences: '[PII is hidden]'. Did not match: validationParameters.ValidAudience: '[PII is hidden]' or validationParameters.ValidAudiences: '[PII is hidden]'."
2018-11-12 17:01:42.061 +07:00 [Information] "Bearer" was not authenticated. Failure message: "IDX10214: Audience validation failed. Audiences: '[PII is hidden]'. Did not match: validationParameters.ValidAudience: '[PII is hidden]' or validationParameters.ValidAudiences: '[PII is hidden]'."
2018-11-12 17:01:42.065 +07:00 [Information] Authorization failed for user: null.
2018-11-12 17:01:42.065 +07:00 [Information] Authorization failed for the request at filter '"Microsoft.AspNetCore.Mvc.Authorization.AuthorizeFilter"'.
2018-11-12 17:01:42.066 +07:00 [Information] Executing ChallengeResult with authentication schemes (["Bearer"]).
2018-11-12 17:01:42.072 +07:00 [Information] AuthenticationScheme: "BearerIdentityServerAuthenticationJwt" was challenged.
2018-11-12 17:01:42.072 +07:00 [Information] AuthenticationScheme: "Bearer" was challenged.
2018-11-12 17:01:42.072 +07:00 [Information] Executed action "Application.IdentityServer.Controllers.ValuesController.Get (Application.IdentityServer)" in 154.0433ms
2018-11-12 17:01:42.073 +07:00 [Information] Request finished in 164.0728ms 401 
2018-11-12 17:01:55.850 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/api/account/signin?username=quyenth@gmail.com&password=Admin@123&scope=api2  
2018-11-12 17:01:55.851 +07:00 [Information] Executing action method "Application.IdentityServer.Controllers.AccountController.Signin (Application.IdentityServer)" with arguments (["quyenth@gmail.com", "Admin@123", "ApiApplication", "secret", "api2"]) - ModelState is Valid
2018-11-12 17:01:55.879 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/.well-known/openid-configuration  
2018-11-12 17:01:55.880 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryEndpoint" for "/.well-known/openid-configuration"
2018-11-12 17:01:55.880 +07:00 [Information] Request finished in 1.2088ms 200 application/json; charset=UTF-8
2018-11-12 17:01:55.882 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/.well-known/openid-configuration/jwks  
2018-11-12 17:01:55.883 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryKeyEndpoint" for "/.well-known/openid-configuration/jwks"
2018-11-12 17:01:55.884 +07:00 [Information] Request finished in 1.7351ms 200 application/json; charset=UTF-8
2018-11-12 17:01:55.901 +07:00 [Information] Request starting HTTP/1.1 POST http://localhost:57906/connect/token application/x-www-form-urlencoded 80
2018-11-12 17:01:55.902 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.TokenEndpoint" for "/connect/token"
2018-11-12 17:01:55.920 +07:00 [Information] Entity Framework Core "2.1.4-rtm-31024" initialized '"ApplicationIdentityContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=AspNetCore "
2018-11-12 17:01:55.935 +07:00 [Information] Executed DbCommand ("15"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [AspNetUsers] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0"
2018-11-12 17:01:55.953 +07:00 [Information] Credentials validated for username: "quyenth@gmail.com"
2018-11-12 17:01:55.953 +07:00 [Information] Token request validation success
"{
  \"ClientId\": \"ApiApplication\",
  \"GrantType\": \"password\",
  \"Scopes\": \"api2\",
  \"UserName\": \"quyenth@gmail.com\",
  \"Raw\": {
    \"grant_type\": \"password\",
    \"username\": \"quyenth@gmail.com\",
    \"password\": \"***REDACTED***\",
    \"scope\": \"api2\"
  }
}"
2018-11-12 17:01:55.965 +07:00 [Information] Executed DbCommand ("11"ms) [Parameters=["@__user_Id_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0"
2018-11-12 17:01:55.968 +07:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0"
2018-11-12 17:01:55.976 +07:00 [Information] Executed DbCommand ("6"ms) [Parameters=["@__userId_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0"
2018-11-12 17:01:55.977 +07:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__user_Id_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0"
2018-11-12 17:01:55.987 +07:00 [Information] Request finished in 85.4953ms 200 application/json; charset=UTF-8
2018-11-12 17:01:55.989 +07:00 [Information] Entity Framework Core "2.1.4-rtm-31024" initialized '"ApplicationIdentityContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=AspNetCore "
2018-11-12 17:01:55.992 +07:00 [Information] Executed DbCommand ("2"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [AspNetUsers] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0"
2018-11-12 17:01:55.994 +07:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [AspNetUsers] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0"
2018-11-12 17:01:56.023 +07:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2018-11-12 17:01:56.023 +07:00 [Information] Executed action "Application.IdentityServer.Controllers.AccountController.Signin (Application.IdentityServer)" in 173.3299ms
2018-11-12 17:01:56.024 +07:00 [Information] Request finished in 174.2143ms 200 application/json; charset=utf-8
2018-11-12 17:02:06.917 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/api/values  
2018-11-12 17:02:06.931 +07:00 [Information] Successfully validated the token.
2018-11-12 17:02:06.932 +07:00 [Information] AuthenticationScheme: "BearerIdentityServerAuthenticationJwt" was successfully authenticated.
2018-11-12 17:02:06.932 +07:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2018-11-12 17:02:06.933 +07:00 [Information] Authorization was successful for user: "7add0627-9b36-4ab4-83f8-6c5fc986b885".
2018-11-12 17:02:06.934 +07:00 [Information] Executing action method "Application.IdentityServer.Controllers.ValuesController.Get (Application.IdentityServer)" with arguments (null) - ModelState is Valid
2018-11-12 17:02:06.935 +07:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2018-11-12 17:02:06.935 +07:00 [Information] Executed action "Application.IdentityServer.Controllers.ValuesController.Get (Application.IdentityServer)" in 17.7599ms
2018-11-12 17:02:06.936 +07:00 [Information] Request finished in 18.6274ms 200 application/json; charset=utf-8
2018-11-12 17:04:20.393 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/api/account/signin?username=quyenth@gmail.com&password=Admin@123&scope=openid  
2018-11-12 17:04:20.395 +07:00 [Information] Executing action method "Application.IdentityServer.Controllers.AccountController.Signin (Application.IdentityServer)" with arguments (["quyenth@gmail.com", "Admin@123", "ApiApplication", "secret", "openid"]) - ModelState is Valid
2018-11-12 17:04:20.408 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/.well-known/openid-configuration  
2018-11-12 17:04:20.409 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryEndpoint" for "/.well-known/openid-configuration"
2018-11-12 17:04:20.410 +07:00 [Information] Request finished in 1.2555ms 200 application/json; charset=UTF-8
2018-11-12 17:04:20.415 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/.well-known/openid-configuration/jwks  
2018-11-12 17:04:20.415 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryKeyEndpoint" for "/.well-known/openid-configuration/jwks"
2018-11-12 17:04:20.416 +07:00 [Information] Request finished in 1.5361ms 200 application/json; charset=UTF-8
2018-11-12 17:04:20.444 +07:00 [Information] Request starting HTTP/1.1 POST http://localhost:57906/connect/token application/x-www-form-urlencoded 82
2018-11-12 17:04:20.444 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.TokenEndpoint" for "/connect/token"
2018-11-12 17:04:20.453 +07:00 [Information] Entity Framework Core "2.1.4-rtm-31024" initialized '"ApplicationIdentityContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=AspNetCore "
2018-11-12 17:04:20.457 +07:00 [Information] Executed DbCommand ("4"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [AspNetUsers] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0"
2018-11-12 17:04:20.474 +07:00 [Information] Credentials validated for username: "quyenth@gmail.com"
2018-11-12 17:04:20.475 +07:00 [Information] Token request validation success
"{
  \"ClientId\": \"ApiApplication\",
  \"GrantType\": \"password\",
  \"Scopes\": \"openid\",
  \"UserName\": \"quyenth@gmail.com\",
  \"Raw\": {
    \"grant_type\": \"password\",
    \"username\": \"quyenth@gmail.com\",
    \"password\": \"***REDACTED***\",
    \"scope\": \"openid\"
  }
}"
2018-11-12 17:04:20.476 +07:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__user_Id_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0"
2018-11-12 17:04:20.478 +07:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__userId_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0"
2018-11-12 17:04:20.480 +07:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0"
2018-11-12 17:04:20.482 +07:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__user_Id_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0"
2018-11-12 17:04:20.489 +07:00 [Information] Request finished in 45.3905ms 200 application/json; charset=UTF-8
2018-11-12 17:04:20.493 +07:00 [Information] Entity Framework Core "2.1.4-rtm-31024" initialized '"ApplicationIdentityContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=AspNetCore "
2018-11-12 17:04:20.495 +07:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [AspNetUsers] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0"
2018-11-12 17:04:20.497 +07:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [AspNetUsers] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0"
2018-11-12 17:04:20.529 +07:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2018-11-12 17:04:20.530 +07:00 [Information] Executed action "Application.IdentityServer.Controllers.AccountController.Signin (Application.IdentityServer)" in 135.4073ms
2018-11-12 17:04:20.530 +07:00 [Information] Request finished in 136.9368ms 200 application/json; charset=utf-8
2018-11-12 17:08:33.883 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/api/account/signin?username=quyenth@gmail.com&password=Admin@123&scope=[openid,api2]  
2018-11-12 17:08:33.884 +07:00 [Information] Executing action method "Application.IdentityServer.Controllers.AccountController.Signin (Application.IdentityServer)" with arguments (["quyenth@gmail.com", "Admin@123", "ApiApplication", "secret", "[openid,api2]"]) - ModelState is Valid
2018-11-12 17:08:33.901 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/.well-known/openid-configuration  
2018-11-12 17:08:33.901 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryEndpoint" for "/.well-known/openid-configuration"
2018-11-12 17:08:33.902 +07:00 [Information] Request finished in 1.6541ms 200 application/json; charset=UTF-8
2018-11-12 17:08:33.906 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/.well-known/openid-configuration/jwks  
2018-11-12 17:08:33.907 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryKeyEndpoint" for "/.well-known/openid-configuration/jwks"
2018-11-12 17:08:33.907 +07:00 [Information] Request finished in 1.4961ms 200 application/json; charset=UTF-8
2018-11-12 17:08:33.931 +07:00 [Information] Request starting HTTP/1.1 POST http://localhost:57906/connect/token application/x-www-form-urlencoded 95
2018-11-12 17:08:33.932 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.TokenEndpoint" for "/connect/token"
2018-11-12 17:08:33.933 +07:00 [Error] Requested scope not allowed: "[openid,api2]"
2018-11-12 17:08:33.935 +07:00 [Error] "{
  \"ClientId\": \"ApiApplication\",
  \"GrantType\": \"password\",
  \"Raw\": {
    \"grant_type\": \"password\",
    \"username\": \"quyenth@gmail.com\",
    \"password\": \"***REDACTED***\",
    \"scope\": \"[openid,api2]\"
  }
}"
2018-11-12 17:08:33.945 +07:00 [Information] Request finished in 14.5337ms 400 application/json; charset=UTF-8
2018-11-12 17:08:33.947 +07:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2018-11-12 17:08:33.947 +07:00 [Information] Executed action "Application.IdentityServer.Controllers.AccountController.Signin (Application.IdentityServer)" in 62.9047ms
2018-11-12 17:08:33.947 +07:00 [Information] Request finished in 63.7586ms 400 application/json; charset=utf-8
2018-11-12 17:08:46.944 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/api/account/signin?username=quyenth@gmail.com&password=Admin@123&scope=openid,api2  
2018-11-12 17:08:46.945 +07:00 [Information] Executing action method "Application.IdentityServer.Controllers.AccountController.Signin (Application.IdentityServer)" with arguments (["quyenth@gmail.com", "Admin@123", "ApiApplication", "secret", "openid,api2"]) - ModelState is Valid
2018-11-12 17:08:46.952 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/.well-known/openid-configuration  
2018-11-12 17:08:46.954 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryEndpoint" for "/.well-known/openid-configuration"
2018-11-12 17:08:46.954 +07:00 [Information] Request finished in 1.9352ms 200 application/json; charset=UTF-8
2018-11-12 17:08:46.958 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/.well-known/openid-configuration/jwks  
2018-11-12 17:08:46.958 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryKeyEndpoint" for "/.well-known/openid-configuration/jwks"
2018-11-12 17:08:46.958 +07:00 [Information] Request finished in 0.8769ms 200 application/json; charset=UTF-8
2018-11-12 17:08:46.969 +07:00 [Information] Request starting HTTP/1.1 POST http://localhost:57906/connect/token application/x-www-form-urlencoded 89
2018-11-12 17:08:46.970 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.TokenEndpoint" for "/connect/token"
2018-11-12 17:08:46.970 +07:00 [Error] Requested scope not allowed: "openid,api2"
2018-11-12 17:08:46.971 +07:00 [Error] "{
  \"ClientId\": \"ApiApplication\",
  \"GrantType\": \"password\",
  \"Raw\": {
    \"grant_type\": \"password\",
    \"username\": \"quyenth@gmail.com\",
    \"password\": \"***REDACTED***\",
    \"scope\": \"openid,api2\"
  }
}"
2018-11-12 17:08:46.971 +07:00 [Information] Request finished in 2.4256ms 400 application/json; charset=UTF-8
2018-11-12 17:08:46.972 +07:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2018-11-12 17:08:46.972 +07:00 [Information] Executed action "Application.IdentityServer.Controllers.AccountController.Signin (Application.IdentityServer)" in 27.5311ms
2018-11-12 17:08:46.972 +07:00 [Information] Request finished in 28.2227ms 400 application/json; charset=utf-8
2018-11-12 17:08:53.843 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/api/account/signin?username=quyenth@gmail.com&password=Admin@123&scope=openid&scope=api2  
2018-11-12 17:08:53.844 +07:00 [Information] Executing action method "Application.IdentityServer.Controllers.AccountController.Signin (Application.IdentityServer)" with arguments (["quyenth@gmail.com", "Admin@123", "ApiApplication", "secret", "openid"]) - ModelState is Valid
2018-11-12 17:08:53.855 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/.well-known/openid-configuration  
2018-11-12 17:08:53.855 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryEndpoint" for "/.well-known/openid-configuration"
2018-11-12 17:08:53.855 +07:00 [Information] Request finished in 0.7398ms 200 application/json; charset=UTF-8
2018-11-12 17:08:53.858 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/.well-known/openid-configuration/jwks  
2018-11-12 17:08:53.858 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryKeyEndpoint" for "/.well-known/openid-configuration/jwks"
2018-11-12 17:08:53.859 +07:00 [Information] Request finished in 0.7398ms 200 application/json; charset=UTF-8
2018-11-12 17:08:53.868 +07:00 [Information] Request starting HTTP/1.1 POST http://localhost:57906/connect/token application/x-www-form-urlencoded 82
2018-11-12 17:08:53.869 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.TokenEndpoint" for "/connect/token"
2018-11-12 17:08:53.870 +07:00 [Information] Entity Framework Core "2.1.4-rtm-31024" initialized '"ApplicationIdentityContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=AspNetCore "
2018-11-12 17:08:54.019 +07:00 [Information] Executed DbCommand ("26"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [AspNetUsers] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0"
2018-11-12 17:08:54.036 +07:00 [Information] Credentials validated for username: "quyenth@gmail.com"
2018-11-12 17:08:54.036 +07:00 [Information] Token request validation success
"{
  \"ClientId\": \"ApiApplication\",
  \"GrantType\": \"password\",
  \"Scopes\": \"openid\",
  \"UserName\": \"quyenth@gmail.com\",
  \"Raw\": {
    \"grant_type\": \"password\",
    \"username\": \"quyenth@gmail.com\",
    \"password\": \"***REDACTED***\",
    \"scope\": \"openid\"
  }
}"
2018-11-12 17:08:54.039 +07:00 [Information] Executed DbCommand ("2"ms) [Parameters=["@__user_Id_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0"
2018-11-12 17:08:54.043 +07:00 [Information] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0"
2018-11-12 17:08:54.044 +07:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__userId_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0"
2018-11-12 17:08:54.044 +07:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__user_Id_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0"
2018-11-12 17:08:54.048 +07:00 [Information] Request finished in 180.1347ms 200 application/json; charset=UTF-8
2018-11-12 17:08:54.050 +07:00 [Information] Entity Framework Core "2.1.4-rtm-31024" initialized '"ApplicationIdentityContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=AspNetCore "
2018-11-12 17:08:54.051 +07:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [AspNetUsers] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0"
2018-11-12 17:08:54.052 +07:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [AspNetUsers] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0"
2018-11-12 17:08:54.077 +07:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2018-11-12 17:08:54.077 +07:00 [Information] Executed action "Application.IdentityServer.Controllers.AccountController.Signin (Application.IdentityServer)" in 233.7195ms
2018-11-12 17:08:54.077 +07:00 [Information] Request finished in 234.4796ms 200 application/json; charset=utf-8
2018-11-12 17:09:08.993 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/api/values  
2018-11-12 17:09:08.996 +07:00 [Information] Failed to validate the token "eyJhbGciOiJSUzI1NiIsImtpZCI6Ijg5N2ExMWFmZmFiYzJhOWViN2M4MmI2ODVmZjhiZmRjIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1NDIwMTczMzQsImV4cCI6MTU0MjAyMDkzNCwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1NzkwNiIsImF1ZCI6Imh0dHA6Ly9sb2NhbGhvc3Q6NTc5MDYvcmVzb3VyY2VzIiwiY2xpZW50X2lkIjoiQXBpQXBwbGljYXRpb24iLCJzdWIiOiI3YWRkMDYyNy05YjM2LTRhYjQtODNmOC02YzVmYzk4NmI4ODUiLCJhdXRoX3RpbWUiOjE1NDIwMTczMzQsImlkcCI6ImxvY2FsIiwidXNlcm5hbWUiOiJxdXllbnRoQGdtYWlsLmNvbSIsImVtYWlsIjoicXV5ZW50aEBnbWFpbC5jb20iLCJmdWxsbmFtZSI6IlRoYWlzIGhvbmcgcXV5ZW4iLCJqdGkiOiI0YmU1YzJjMDMyOWY1MDQ5N2YyZDJhMDk4MGI1MzY0YiIsInNjb3BlIjpbIm9wZW5pZCJdLCJhbXIiOlsicHdkIl19.YJPK5pwxtxHra7wjoQKOWSwGkyAYA4bz1A2PG26WjGXYbbCV4O4N_hDY3RcH0abGLtY0F5rsK1QVaBpyqqxOTnBBdxhpFLQV5_mF5dQiYE2bylJ749lneIZ9HbMfyAyCOU6jkzPjBpVtEU3EmqSlgLrN_p3gH8O2lH7DKvHO74dVMKgDkTzGcYmrURDeT50YQwkYxYCc7EWdRk9BwkatYyr5CQRbLib8b4N5phwsnJPpzGvl5lwqIoRy9226LNwyOmgelrqrdiXkX8MVkTJ2zXhk83k0Tj8fhQzyx6WR956qvK4MS9_qQURgOpxjiP546EJt7rsdg39z_vFWdYo6lg".
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidAudienceException: IDX10214: Audience validation failed. Audiences: '[PII is hidden]'. Did not match: validationParameters.ValidAudience: '[PII is hidden]' or validationParameters.ValidAudiences: '[PII is hidden]'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateAudience(IEnumerable`1 audiences, SecurityToken securityToken, TokenValidationParameters validationParameters) in C:\agent2\_work\56\s\src\Microsoft.IdentityModel.Tokens\Validators.cs:line 108
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters) in C:\agent2\_work\56\s\src\System.IdentityModel.Tokens.Jwt\JwtSecurityTokenHandler.cs:line 737
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.<HandleAuthenticateAsync>d__6.MoveNext()
2018-11-12 17:09:09.002 +07:00 [Information] "BearerIdentityServerAuthenticationJwt" was not authenticated. Failure message: "IDX10214: Audience validation failed. Audiences: '[PII is hidden]'. Did not match: validationParameters.ValidAudience: '[PII is hidden]' or validationParameters.ValidAudiences: '[PII is hidden]'."
2018-11-12 17:09:09.002 +07:00 [Information] "Bearer" was not authenticated. Failure message: "IDX10214: Audience validation failed. Audiences: '[PII is hidden]'. Did not match: validationParameters.ValidAudience: '[PII is hidden]' or validationParameters.ValidAudiences: '[PII is hidden]'."
2018-11-12 17:09:09.002 +07:00 [Information] Authorization failed for user: null.
2018-11-12 17:09:09.002 +07:00 [Information] Authorization failed for the request at filter '"Microsoft.AspNetCore.Mvc.Authorization.AuthorizeFilter"'.
2018-11-12 17:09:09.002 +07:00 [Information] Executing ChallengeResult with authentication schemes (["Bearer"]).
2018-11-12 17:09:09.002 +07:00 [Information] AuthenticationScheme: "BearerIdentityServerAuthenticationJwt" was challenged.
2018-11-12 17:09:09.002 +07:00 [Information] AuthenticationScheme: "Bearer" was challenged.
2018-11-12 17:09:09.002 +07:00 [Information] Executed action "Application.IdentityServer.Controllers.ValuesController.Get (Application.IdentityServer)" in 7.5605ms
2018-11-12 17:09:09.003 +07:00 [Information] Request finished in 9.9205ms 401 
2018-11-12 17:09:17.394 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/connect/userinfo  
2018-11-12 17:09:17.396 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.UserInfoEndpoint" for "/connect/userinfo"
2018-11-12 17:09:17.428 +07:00 [Information] Entity Framework Core "2.1.4-rtm-31024" initialized '"ApplicationIdentityContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=AspNetCore "
2018-11-12 17:09:17.440 +07:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__get_Item_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[FullName], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[SecurityStamp], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0"
2018-11-12 17:09:17.468 +07:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__user_Id_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0"
2018-11-12 17:09:17.469 +07:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__userId_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0"
2018-11-12 17:09:17.470 +07:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__userId_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0"
2018-11-12 17:09:17.472 +07:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__user_Id_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0"
2018-11-12 17:09:17.473 +07:00 [Information] Profile service returned to the following claim types: "username email fullname"
2018-11-12 17:09:17.475 +07:00 [Information] Request finished in 80.9808ms 200 application/json; charset=UTF-8
2018-11-12 17:18:03.575 +07:00 [Information] User profile is available. Using '"C:\Users\quyenth\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest.
2018-11-12 17:18:03.683 +07:00 [Information] You are using the in-memory version of the persisted grant store. This will store consent decisions, authorization codes, refresh and reference tokens in memory only. If you are using any of those features in production, you want to switch to a different store implementation.
2018-11-12 17:18:04.143 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/api/account/signin?username=quyenth@gmail.com&password=Admin@123&scope=openid%20api2  
2018-11-12 17:18:04.581 +07:00 [Information] Executing action method "Application.IdentityServer.Controllers.AccountController.Signin (Application.IdentityServer)" with arguments (["quyenth@gmail.com", "Admin@123", "ApiApplication", "secret", "openid api2"]) - ModelState is Valid
2018-11-12 17:18:04.654 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/.well-known/openid-configuration  
2018-11-12 17:18:04.660 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryEndpoint" for "/.well-known/openid-configuration"
2018-11-12 17:18:04.759 +07:00 [Information] Request finished in 105.3912ms 200 application/json; charset=UTF-8
2018-11-12 17:18:04.795 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/.well-known/openid-configuration/jwks  
2018-11-12 17:18:04.797 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryKeyEndpoint" for "/.well-known/openid-configuration/jwks"
2018-11-12 17:18:04.843 +07:00 [Information] Request finished in 48.1525ms 200 application/json; charset=UTF-8
2018-11-12 17:18:04.888 +07:00 [Information] Request starting HTTP/1.1 POST http://localhost:57906/connect/token application/x-www-form-urlencoded 87
2018-11-12 17:18:04.895 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.TokenEndpoint" for "/connect/token"
2018-11-12 17:18:05.668 +07:00 [Information] Entity Framework Core "2.1.4-rtm-31024" initialized '"ApplicationIdentityContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=AspNetCore "
2018-11-12 17:18:08.960 +07:00 [Information] Executed DbCommand ("131"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [AspNetUsers] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0"
2018-11-12 17:18:09.134 +07:00 [Information] Credentials validated for username: "quyenth@gmail.com"
2018-11-12 17:18:09.154 +07:00 [Information] Token request validation success
"{
  \"ClientId\": \"ApiApplication\",
  \"GrantType\": \"password\",
  \"Scopes\": \"api2 openid\",
  \"UserName\": \"quyenth@gmail.com\",
  \"Raw\": {
    \"grant_type\": \"password\",
    \"username\": \"quyenth@gmail.com\",
    \"password\": \"***REDACTED***\",
    \"scope\": \"openid api2\"
  }
}"
2018-11-12 17:18:09.290 +07:00 [Information] Executed DbCommand ("4"ms) [Parameters=["@__user_Id_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0"
2018-11-12 17:18:09.342 +07:00 [Information] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0"
2018-11-12 17:18:09.352 +07:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__userId_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0"
2018-11-12 17:18:09.353 +07:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__user_Id_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0"
2018-11-12 17:18:09.419 +07:00 [Information] Request finished in 4530.5534ms 200 application/json; charset=UTF-8
2018-11-12 17:18:09.427 +07:00 [Information] Entity Framework Core "2.1.4-rtm-31024" initialized '"ApplicationIdentityContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=AspNetCore "
2018-11-12 17:18:09.435 +07:00 [Information] Executed DbCommand ("6"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [AspNetUsers] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0"
2018-11-12 17:18:09.456 +07:00 [Information] Executed DbCommand ("14"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [AspNetUsers] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0"
2018-11-12 17:18:09.484 +07:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2018-11-12 17:18:09.500 +07:00 [Information] Executed action "Application.IdentityServer.Controllers.AccountController.Signin (Application.IdentityServer)" in 5121.2795ms
2018-11-12 17:18:09.501 +07:00 [Information] Request finished in 5367.3803ms 200 application/json; charset=utf-8
2018-11-12 17:18:27.774 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/connect/userinfo  
2018-11-12 17:18:27.775 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.UserInfoEndpoint" for "/connect/userinfo"
2018-11-12 17:18:27.836 +07:00 [Information] Entity Framework Core "2.1.4-rtm-31024" initialized '"ApplicationIdentityContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=AspNetCore "
2018-11-12 17:18:27.847 +07:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__get_Item_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [e].[Id], [e].[AccessFailedCount], [e].[ConcurrencyStamp], [e].[Email], [e].[EmailConfirmed], [e].[FullName], [e].[LockoutEnabled], [e].[LockoutEnd], [e].[NormalizedEmail], [e].[NormalizedUserName], [e].[PasswordHash], [e].[PhoneNumber], [e].[PhoneNumberConfirmed], [e].[SecurityStamp], [e].[TwoFactorEnabled], [e].[UserName]
FROM [AspNetUsers] AS [e]
WHERE [e].[Id] = @__get_Item_0"
2018-11-12 17:18:27.888 +07:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__user_Id_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0"
2018-11-12 17:18:27.889 +07:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__userId_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0"
2018-11-12 17:18:27.890 +07:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__userId_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0"
2018-11-12 17:18:27.890 +07:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__user_Id_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0"
2018-11-12 17:18:27.891 +07:00 [Information] Profile service returned to the following claim types: "username email fullname"
2018-11-12 17:18:27.893 +07:00 [Information] Request finished in 119.036ms 200 application/json; charset=UTF-8
2018-11-12 17:18:41.961 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/api/values  
2018-11-12 17:18:41.999 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/.well-known/openid-configuration  
2018-11-12 17:18:42.000 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryEndpoint" for "/.well-known/openid-configuration"
2018-11-12 17:18:42.000 +07:00 [Information] Request finished in 1.1911ms 200 application/json; charset=UTF-8
2018-11-12 17:18:42.023 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/.well-known/openid-configuration/jwks  
2018-11-12 17:18:42.024 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryKeyEndpoint" for "/.well-known/openid-configuration/jwks"
2018-11-12 17:18:42.024 +07:00 [Information] Request finished in 1.4579ms 200 application/json; charset=UTF-8
2018-11-12 17:18:42.053 +07:00 [Information] Successfully validated the token.
2018-11-12 17:18:42.054 +07:00 [Information] AuthenticationScheme: "BearerIdentityServerAuthenticationJwt" was successfully authenticated.
2018-11-12 17:18:42.054 +07:00 [Information] AuthenticationScheme: "Bearer" was successfully authenticated.
2018-11-12 17:18:42.059 +07:00 [Information] Authorization was successful for user: "7add0627-9b36-4ab4-83f8-6c5fc986b885".
2018-11-12 17:18:42.059 +07:00 [Information] Executing action method "Application.IdentityServer.Controllers.ValuesController.Get (Application.IdentityServer)" with arguments (null) - ModelState is Valid
2018-11-12 17:18:42.060 +07:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2018-11-12 17:18:42.060 +07:00 [Information] Executed action "Application.IdentityServer.Controllers.ValuesController.Get (Application.IdentityServer)" in 89.6218ms
2018-11-12 17:18:42.061 +07:00 [Information] Request finished in 99.4506ms 200 application/json; charset=utf-8
2018-11-12 17:19:58.528 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/api/account/signin?username=quyenth@gmail.com&password=Admin@123&scope=openid%20api2  
2018-11-12 17:19:58.530 +07:00 [Information] Executing action method "Application.IdentityServer.Controllers.AccountController.Signin (Application.IdentityServer)" with arguments (["quyenth@gmail.com", "Admin@123", "ApiApplication", "secret", "openid api2"]) - ModelState is Valid
2018-11-12 17:19:58.564 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/.well-known/openid-configuration  
2018-11-12 17:19:58.565 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryEndpoint" for "/.well-known/openid-configuration"
2018-11-12 17:19:58.566 +07:00 [Information] Request finished in 1.8294ms 200 application/json; charset=UTF-8
2018-11-12 17:19:58.568 +07:00 [Information] Request starting HTTP/1.1 GET http://localhost:57906/.well-known/openid-configuration/jwks  
2018-11-12 17:19:58.568 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.DiscoveryKeyEndpoint" for "/.well-known/openid-configuration/jwks"
2018-11-12 17:19:58.568 +07:00 [Information] Request finished in 0.8131ms 200 application/json; charset=UTF-8
2018-11-12 17:19:58.583 +07:00 [Information] Request starting HTTP/1.1 POST http://localhost:57906/connect/token application/x-www-form-urlencoded 87
2018-11-12 17:19:58.584 +07:00 [Information] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.TokenEndpoint" for "/connect/token"
2018-11-12 17:19:58.586 +07:00 [Information] Entity Framework Core "2.1.4-rtm-31024" initialized '"ApplicationIdentityContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=AspNetCore "
2018-11-12 17:19:58.590 +07:00 [Information] Executed DbCommand ("3"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [AspNetUsers] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0"
2018-11-12 17:19:58.615 +07:00 [Information] Credentials validated for username: "quyenth@gmail.com"
2018-11-12 17:19:58.616 +07:00 [Information] Token request validation success
"{
  \"ClientId\": \"ApiApplication\",
  \"GrantType\": \"password\",
  \"Scopes\": \"api2 openid\",
  \"UserName\": \"quyenth@gmail.com\",
  \"Raw\": {
    \"grant_type\": \"password\",
    \"username\": \"quyenth@gmail.com\",
    \"password\": \"***REDACTED***\",
    \"scope\": \"openid api2\"
  }
}"
2018-11-12 17:19:58.617 +07:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__user_Id_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0"
2018-11-12 17:19:58.619 +07:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__userId_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0"
2018-11-12 17:19:58.620 +07:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__userId_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [role].[Name]
FROM [AspNetUserRoles] AS [userRole]
INNER JOIN [AspNetRoles] AS [role] ON [userRole].[RoleId] = [role].[Id]
WHERE [userRole].[UserId] = @__userId_0"
2018-11-12 17:19:58.621 +07:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@__user_Id_0='?' (Size = 450)"], CommandType='Text', CommandTimeout='30']"
""SELECT [uc].[Id], [uc].[ClaimType], [uc].[ClaimValue], [uc].[UserId]
FROM [AspNetUserClaims] AS [uc]
WHERE [uc].[UserId] = @__user_Id_0"
2018-11-12 17:19:58.627 +07:00 [Information] Request finished in 43.6488ms 200 application/json; charset=UTF-8
2018-11-12 17:19:58.628 +07:00 [Information] Entity Framework Core "2.1.4-rtm-31024" initialized '"ApplicationIdentityContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer"' with options: "MigrationsAssembly=AspNetCore "
2018-11-12 17:19:58.630 +07:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [AspNetUsers] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0"
2018-11-12 17:19:58.631 +07:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@__normalizedUserName_0='?' (Size = 256)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [AspNetUsers] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0"
2018-11-12 17:19:58.653 +07:00 [Information] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext".
2018-11-12 17:19:58.653 +07:00 [Information] Executed action "Application.IdentityServer.Controllers.AccountController.Signin (Application.IdentityServer)" in 123.4899ms
2018-11-12 17:19:58.653 +07:00 [Information] Request finished in 124.8643ms 200 application/json; charset=utf-8
